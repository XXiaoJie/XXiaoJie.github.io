<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"xxiaojie.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.23.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="分享雷达知识">
<meta property="og:type" content="website">
<meta property="og:title" content="xiaojie雷达说">
<meta property="og:url" content="https://xxiaojie.github.io/index.html">
<meta property="og:site_name" content="xiaojie雷达说">
<meta property="og:description" content="分享雷达知识">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="xiaojie">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://xxiaojie.github.io/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>xiaojie雷达说</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  






  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js" defer></script>



  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">xiaojie雷达说</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-schedule"><a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li><li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="xiaojie"
      src="/images/xiaojie.png">
  <p class="site-author-name" itemprop="name">xiaojie</p>
  <div class="site-description" itemprop="description">分享雷达知识</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">10</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xxiaojie.github.io/2025/04/25/radar/TI/flash/qspi%20flash/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xiaojie.png">
      <meta itemprop="name" content="xiaojie">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaojie雷达说">
      <meta itemprop="description" content="分享雷达知识">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | xiaojie雷达说">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/04/25/radar/TI/flash/qspi%20flash/" class="post-title-link" itemprop="url">QSPI flash driver</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-04-25 23:29:14 / 修改时间：21:11:01" itemprop="dateCreated datePublished" datetime="2025-04-25T23:29:14+08:00">2025-04-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/" itemprop="url" rel="index"><span itemprop="name">radar</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/TI/" itemprop="url" rel="index"><span itemprop="name">TI</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>10k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>9 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Hello，大家好，我是Xiaojie，好久不见，欢迎大家能够和Xiaojie一起学习毫米波雷达知识，这篇文章主要是介绍flash的基本知识以及TI SDK中的qspi驱动。</p>
<h1>基础知识</h1>
<h2 id="qspi协议简介">QSPI协议简介</h2>
<p>QSPI是Queued SPI的简写，是Motorola公司推出的SPI接口的扩展，比SPI应用更加广泛。在SPI协议的基础上，Motorola公司对其功能进行了增强，增加了队列传输机制，推出了队列串行外围接口协议(即QSPI协议)。QSPI是一种专用的通信接口，连接单、双或四条数据线SPI Flash存储介质。</p>
<p>该接口可以在一下三种模式下工作：</p>
<ol>
<li>
<p>间接模式：使用QSPI寄存器执行全部操作</p>
</li>
<li>
<p>状态轮询模式：周期性读取外部Flash状态寄存器，而且标志位置1时会产生中断(如擦写或烧写完成，会产生中断)</p>
</li>
<li>
<p>内存映射模式：外部Flash映射到微控制器地址空间，从而系统将其视作内部存储器</p>
</li>
</ol>
<p>QSPI使用6个信号线连接FLash，分别是4根数据线IO0、IO1、IO2、IO3，一根时钟线CLK，一个片选线CS</p>
<ol>
<li>
<p>CS：片选输出(低电平有效)</p>
</li>
<li>
<p>CLK：时钟输出，用于通讯数据同步。由通讯主机产生，决定了通讯的速率，不同的设备支持的最高时钟频率不一样，两个设备之间通讯时，通讯速率受限于低速设备</p>
</li>
<li>
<p>IO0：在双线/四线模式中位双向IO，单线模式中位串行输出</p>
</li>
<li>
<p>IO1：在双线/四线模式中位双向IO，单线模式中为串行输入</p>
</li>
<li>
<p>IO2：在四线模式中为双向IO</p>
</li>
<li>
<p>IO3：在四线模式中为双向IO</p>
</li>
</ol>
<h2 id="qspi命令序列">QSPI命令序列</h2>
<p>QSPI通过命令与Flash通信，每条命令包括指令、地址、交替字节、空指令和数据这五个阶段，任一阶段均可跳过，但至少要包含指令、地址、交替字节或数据阶段之一。CS在每条指令开始前下降，在每条指令完成后再次上升。下图为QSPI四线模式下的读命令时许。</p>
<img src="/2025/04/25/radar/TI/flash/qspi%20flash/1.png" class="" title="放置图片">
<ol>
<li>指令阶段</li>
</ol>
<p>在指令阶段，将配置的一条8位指令发送到Flash，指定待执行的操作。</p>
<ol start="2">
<li>地址阶段</li>
</ol>
<p>在地址阶段，将1-4字节发送到Flash，指示操作地址。</p>
<ol start="3">
<li>交替字节阶段</li>
</ol>
<p>在交替字节阶段，将1-4字节发送到Flash，一般用于控制操作模式</p>
<ol start="4">
<li>空指令周期阶段</li>
</ol>
<p>在空指令周期阶段，给定的1-31个周期内不发送或接收任何数据，目的时当采用更高的时钟频率时，给Flash留出准备数据阶段的时间。</p>
<ol start="5">
<li>数据阶段</li>
</ol>
<p>在数据阶段，可以从Flash接收或向其发送任意数量的字节</p>
<h1>TI驱动以及函数代码实现</h1>
<h2 id="ti驱动代码">TI驱动代码</h2>
<h3 id="qspi驱动">QSPI驱动</h3>
<h4 id="qspi-init">QSPI_init</h4>
<p><strong>函数原型：</strong></p>
<pre><code>void QSPI_init	(void)	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>QSPI初始化，该函数每个系统只能调用一次且其他QSPI API必须在其之后调用
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>无
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>无
</code></pre>
<h4 id="qspi-params-init">QSPI_Params_init</h4>
<p><strong>函数原型：</strong></p>
<pre><code>void 	QSPI_Params_init (QSPI_Params *params)
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>QSPI参数初始化，该函数每个系统只能调用一次且其他QSPI API必须在其之后调用
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>params：指向QSPI_Param指针，用于初始化
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>无
</code></pre>
<h4 id="qspi-open">QSPI_open</h4>
<p><strong>函数原型：</strong></p>
<pre><code>QSPI_Handle QSPI_open(QSPI_Params* params, int32_t* errCode)
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>初始化一个给定的QSPI外围设备
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>params：用于创建QSPI驱动程序实例的QSPI参数
errCode：QSPI驱动程序发生错误时的错误码
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>函数执行成功后，返回值为QSPI_Handle；函数发生错误，则返回NULL
</code></pre>
<h4 id="qspi-cfgread">QSPI_cfgRead</h4>
<p><strong>函数原型：</strong></p>
<pre><code>int32_t QSPI_cfgRead(QSPI_Handle handle,
                      QSPI_CMD cmd,
                      QSPI_WORDLEN wordLen,
                      uint32_t * data,
                      uint32_t numWords 
                      )	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>通过配置端口执行QSPI读取
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>handle：QSPI句柄
cmd：QSPI读取命令
wordLen：QSPI数据字长(bit为单位)
data：指向data缓冲区，用于保存读取到的数据
numWords：一帧中要读取的字长数
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>函数执行成功返回值为0，函数执行失败返回值小于0，且返回值表征错误类型
</code></pre>
<h4 id="qspi-cfgwrite">QSPI_cfgWrite</h4>
<p><strong>函数原型：</strong></p>
<pre><code>int32_t QSPI_cfgWrite(QSPI_Handle handle,
                  QSPI_CMD cmd,
                  QSPI_WORDLEN wordLen,
                  uint32_t * data,
                  uint32_t numWords 
                  )	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>通过配置端口执行QSPI写入
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>handle：QSPI句柄
cmd：QSPI写入命令
wordLen：QSPI数据字长(bit为单位)
data：要写入的数据
numWords：一帧中要写入的字长数
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>函数执行成功返回值为0，函数执行失败返回值小于0，且返回值表征错误类型
</code></pre>
<h4 id="qspi-memaccesscfg">QSPI_memAccessCfg</h4>
<p><strong>函数原型：</strong></p>
<pre><code>void QSPI_memAccessCfg	(QSPI_Handle handle,
                          QSPI_memConfig * memConfig 
                          )	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数用于配置内存映射设置寄存器
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>handle：QSPI句柄
memConfig：内存映射配置
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>函数执行成功返回值为0，函数执行失败返回值小于0，且返回值表征错误类型
</code></pre>
<h4 id="qspi-isframecompleted">QSPI_isFrameCompleted</h4>
<p><strong>函数原型：</strong></p>
<pre><code>bool QSPI_isFrameCompleted(QSPI_Handle handle)	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数轮询帧传输完成的状态
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>handle：QSPI句柄
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>帧传输完成返回值为true，帧传输未完成返回false
</code></pre>
<h4 id="qspi-isbusy">QSPI_isBusy</h4>
<p><strong>函数原型：</strong></p>
<pre><code>bool QSPI_isBusy(QSPI_Handle handle)	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数轮询QSPI忙碌位的状态
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>handle：QSPI句柄
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>QSPI处于忙碌状态返回值为true，QSPI处于空闲状态返回值为false
</code></pre>
<h3 id="qspiflash驱动">QSPIFlash驱动</h3>
<h4 id="qspiflash-getdeviceid">QSPIFlash_getDeviceID</h4>
<p><strong>函数原型：</strong></p>
<pre><code>void QSPIFlash_getDeviceID(QSPIFlash_Handle QSPIFlashHandle,
                            SPIFLASH_devID * devId 
                            )	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数用于获取flash设备信息
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
devId：指向设备ID结构体的指针
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>无
</code></pre>
<h4 id="qspiflash-writeenable">QSPIFlash_writeEnable</h4>
<p><strong>函数原型：</strong></p>
<pre><code>void QSPIFlash_writeEnable(QSPIFlash_Handle QSPIFlashHandle)	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数使能写入flash，需要在擦除和页编程操作之前需要操作它
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>无
</code></pre>
<h4 id="qspiflash-writedisable">QSPIFlash_writeDisable</h4>
<p><strong>函数原型：</strong></p>
<pre><code>void QSPIFlash_writeDisable(QSPIFlash_Handle QSPIFlashHandle)
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数禁能写入flash
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>无
</code></pre>
<h4 id="qspiflash-progquadread">QSPIFlash_progQuadRead</h4>
<p><strong>函数原型：</strong></p>
<pre><code>void QSPIFlash_progQuadRead(QSPIFlash_Handle QSPIFlashHandle)
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数为四路接口操作准备串行内存
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>无
</code></pre>
<h4 id="qspiflash-clearblockprotectbits">QSPIFlash_clearBlockProtectBits</h4>
<p><strong>函数原型：</strong></p>
<pre><code>void QSPIFlash_clearBlockProtectBits(QSPIFlash_Handle QSPIFlashHandle)
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数用于清除块保护位
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>无
</code></pre>
<h4 id="qspiflash-singleread">QSPIFlash_singleRead</h4>
<p><strong>函数原型：</strong></p>
<pre><code>void QSPIFlash_singleRead(QSPIFlash_Handle QSPIFlashHandle,
                          uint32_t memAddr,
                          uint32_t dataLen,
                          uint8_t * userDataBuf 
                          )	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数在配置模式下进行单路读取
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
memAddr：flash地址
dataLen：数据长度(按字节)
userDataBuf：指向要写入数据的缓存区
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>无
</code></pre>
<h4 id="qspiflash-dualread">QSPIFlash_dualRead</h4>
<p><strong>函数原型：</strong></p>
<pre><code>void QSPIFlash_dualRead(QSPIFlash_Handle QSPIFlashHandle,
                          uint32_t memAddr,
                          uint32_t dataLen,
                          uint8_t * userDataBuf 
                          )	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数在配置模式下进行双路读取
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
memAddr：flash地址
dataLen：数据长度(按字节)
userDataBuf：指向要写入数据的缓存区
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>无
</code></pre>
<h4 id="qspiflash-quadread">QSPIFlash_quadRead</h4>
<p><strong>函数原型：</strong></p>
<pre><code>void QSPIFlash_quadRead(QSPIFlash_Handle QSPIFlashHandle,
                          uint32_t memAddr,
                          uint32_t dataLen,
                          uint8_t * userDataBuf 
                          )	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数在配置模式下进行四路读取
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
memAddr：flash地址
dataLen：数据长度(按字节)
userDataBuf：指向要写入数据的缓存区
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>无
</code></pre>
<h4 id="qspiflash-mmapread">QSPIFlash_mmapRead</h4>
<p><strong>函数原型：</strong></p>
<pre><code>void QSPIFlash_mmapRead(QSPIFlash_Handle QSPIFlashHandle,
                          uint32_t memAddr,
                          uint32_t dataLen,
                          uint8_t * userDataBuf 
                          )	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数以内存映射的方式从QSPI flash中进行读取
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
memAddr：flash地址
dataLen：数据长度(按字节)
userDataBuf：指向要写入数据的缓存区
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>当函数执行成功后，返回值为0，当读取失败是返回错误码
</code></pre>
<h4 id="qspiflash-singlewrite">QSPIFlash_singleWrite</h4>
<p><strong>函数原型：</strong></p>
<pre><code>void QSPIFlash_singleWrite(QSPIFlash_Handle QSPIFlashHandle,
                            uint32_t memAddr,
                            uint32_t dataLen,
                            uint8_t * srcDataAddr 
                            )	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>在配置模式下该函数执行单通道写入
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
memAddr：flash地址
dataLen：数据长度(按字节)
srcDataAddr：指向要拷出数据的缓存区
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>无
</code></pre>
<h4 id="qspiflash-mmapwrite">QSPIFlash_mmapWrite</h4>
<p><strong>函数原型：</strong></p>
<pre><code>int32_t QSPIFlash_mmapWrite(QSPIFlash_Handle QSPIFlashHandle,
                            uint32_t memAddr,
                            uint32_t dataLen,
                            uint8_t * srcDataAddr 
                            )	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数以内存映射方式写入到flash中
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
memAddr：flash地址
dataLen：数据长度(按字节)
srcDataAddr：指向要拷出数据的缓存区
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>当函数执行成功返回值为0，当函数执行失败后返回值小于0
</code></pre>
<h4 id="qspiflash-configmmapread">QSPIFlash_configMmapRead</h4>
<p><strong>函数原型：</strong></p>
<pre><code>int32_t QSPIFlash_configMmapRead(QSPIFlash_Handle QSPIFlashHandle,
                                FLASH_READ_MODE mode,
                                int32_t * errCode 
                                )	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数设置内存映射读的配置
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
mode：内存映射读的模式
errCode：该API产生的错误码
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>函数执行成功返回值为0，执行失败返回值小于0
</code></pre>
<h4 id="qspiflash-configmmapwrite">QSPIFlash_configMmapWrite</h4>
<p><strong>函数原型：</strong></p>
<pre><code>void QSPIFlash_configMmapWrite(QSPIFlash_Handle QSPIFlashHandle	)	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数为内存映射写设置配置
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>无
</code></pre>
<h4 id="qspiflash-sectorerase">QSPIFlash_sectorErase</h4>
<p><strong>函数原型：</strong></p>
<pre><code>int32_t QSPIFlash_sectorErase(QSPIFlash_Handle QSPIFlashHandle,
                              uint32_t addr 
                              )		
</code></pre>
<p><strong>函数功能：</strong></p>
<p>该函数擦除一个flash扇区</p>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
addr：内存映射读的模式
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>函数执行成功返回值为0，当扇区擦除失败时返回值小于0
</code></pre>
<h4 id="qspiflash-blockerase">QSPIFlash_blockErase</h4>
<p><strong>函数原型：</strong></p>
<pre><code>int32_t QSPIFlash_blockErase(QSPIFlash_Handle QSPIFlashHandle,
                              uint32_t addr 
                              )		
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数擦除一个64KB flash扇区
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
addr：内存映射读的模式
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>函数执行成功返回值为0，当扇区擦除失败时返回值小于0
</code></pre>
<h4 id="qspiflash-chiperase">QSPIFlash_chipErase</h4>
<p><strong>函数原型：</strong></p>
<pre><code>int32_t QSPIFlash_chipErase(QSPIFlash_Handle QSPIFlashHandle)		
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数擦除整个flash
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>函数执行成功返回值为0，当扇区擦除失败时返回值小于0
</code></pre>
<h4 id="qspiflash-init">QSPIFlash_init</h4>
<p><strong>函数原型：</strong></p>
<pre><code>void QSPIFlash_init(void)	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数初始化QSPI flash驱动
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>无
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>无
</code></pre>
<h4 id="qspiflash-open">QSPIFlash_open</h4>
<p><strong>函数原型：</strong></p>
<pre><code>QSPIFlash_Handle QSPIFlash_open(QSPI_Handle QSPIHandle,
                                int32_t * errCode 
                                )	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数打开QSPI Flash驱动，能获取flash设备的信息
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIHandle：qspi的句柄
errCode：执行该函数产生的错误码
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>当函数执行成功后，返回值为QSPIFlash_Handle的句柄，当函数执行错误后，返回值为空指针
</code></pre>
<h4 id="qspiflash-close">QSPIFlash_close</h4>
<p><strong>函数原型：</strong></p>
<pre><code>int32_t QSPIFlash_close(QSPIFlash_Handle QSPIFlashHandle)	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数用于关闭QSPI Flash驱动程序和驱动程序所使用的资源
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>当函数执行成功后返回值为0，当函数执行失败时返回值小于0
</code></pre>
<h4 id="qspiflash-getextflashaddr">QSPIFlash_getExtFlashAddr</h4>
<p><strong>函数原型：</strong></p>
<pre><code>int32_t QSPIFlash_getExtFlashAddr(QSPIFlash_Handle QSPIFlashHandle)
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数获取外部flash的基地址
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>返回值为外部flash的地址
</code></pre>
<h4 id="qspiflash-sysdmawrite">QSPIFlash_sysDmaWrite</h4>
<p><strong>函数原型：</strong></p>
<pre><code>int32_t QSPIFlash_sysDmaWrite(QSPIFlash_Handle QSPIFlashHandle,
                                DMA_Handle dmaHandle,
                                uint32_t dmaChan,
                                uint32_t srcAddr,
                                uint32_t dstAddr,
                                uint32_t dataLen 
                                )	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>该函数设置DMA写，并且传输用户缓存数据到flash
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
dmaHandle：dma驱动的句柄
dmaChan：DMA通道
srcAddr：用于写入操作的缓冲区地址，地址应双字节对齐
dstAddr：写入操作的flash地址，地址应双字节对齐
dataLen：DMA读的数据长度，以双字节为单位
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>当函数执行成功后返回值为0，当函数执行失败后返回值小于0
</code></pre>
<h4 id="qspiflash-sysdmaread">QSPIFlash_sysDmaRead</h4>
<p><strong>函数原型：</strong></p>
<pre><code>int32_t QSPIFlash_sysDmaRead(QSPIFlash_Handle QSPIFlashHandle,
                                DMA_Handle dmaHandle,
                                uint32_t dmaChan,
                                uint32_t srcAddr,
                                uint32_t dstAddr,
                                uint32_t dataLen 
                                )	
</code></pre>
<p><strong>函数功能：</strong></p>
<p>该函数设置DMA读</p>
<p><strong>函数参数：</strong></p>
<pre><code>QSPIFlashHandle：QSPI flash驱动的句柄
dmaHandle：dma驱动的句柄
dmaChan：DMA通道
srcAddr：用于写入操作的缓冲区地址，地址应双字节对齐
dstAddr：写入操作的flash地址，地址应双字节对齐
dataLen：DMA读的数据长度，以双字节为单位
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>当函数执行成功后返回值为0，当函数执行失败后返回值小于0
</code></pre>
<h1>代码案例</h1>
<h2 id="gpio复用">GPIO复用</h2>
<p>硬件电路原理图如下图所示，在硬件上关于flash GPIO的PIN脚共有6个，R12复用为QSPI的时钟线，P11复用为QSPI的时钟线，R13复用QSPI_D0的数据线，N12复用为QSPI_D1的数据线，R14复用为QSPI_D2的数据线，P12复用为QSPI_D3的数据线</p>
<img src="/2025/04/25/radar/TI/flash/qspi%20flash/2.png" class="" title="放置图片">
<img src="/2025/04/25/radar/TI/flash/qspi%20flash/3.png" class="" title="放置图片">
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Pinmux_Set_OverrideCtrl(SOC_XWR68XX_PINR12_PADAP, PINMUX_OUTEN_RETAIN_HW_CTRL, PINMUX_INPEN_RETAIN_HW_CTRL);</span><br><span class="line">Pinmux_Set_FuncSel(SOC_XWR68XX_PINR12_PADAP, SOC_XWR68XX_PINR12_PADAP_QSPI_CLK);</span><br><span class="line"></span><br><span class="line">Pinmux_Set_OverrideCtrl(SOC_XWR68XX_PINP11_PADAQ, PINMUX_OUTEN_RETAIN_HW_CTRL, PINMUX_INPEN_RETAIN_HW_CTRL);</span><br><span class="line">Pinmux_Set_FuncSel(SOC_XWR68XX_PINP11_PADAQ, SOC_XWR68XX_PINP11_PADAQ_QSPI_CSN);</span><br><span class="line"></span><br><span class="line">Pinmux_Set_OverrideCtrl(SOC_XWR68XX_PINR13_PADAL, PINMUX_OUTEN_RETAIN_HW_CTRL, PINMUX_INPEN_RETAIN_HW_CTRL);</span><br><span class="line">Pinmux_Set_FuncSel(SOC_XWR68XX_PINR13_PADAL, SOC_XWR68XX_PINR13_PADAL_QSPI_D0);</span><br><span class="line"></span><br><span class="line">Pinmux_Set_OverrideCtrl(SOC_XWR68XX_PINN12_PADAM, PINMUX_OUTEN_RETAIN_HW_CTRL, PINMUX_INPEN_RETAIN_HW_CTRL);</span><br><span class="line">Pinmux_Set_FuncSel(SOC_XWR68XX_PINN12_PADAM, SOC_XWR68XX_PINN12_PADAM_QSPI_D1);</span><br><span class="line"></span><br><span class="line">Pinmux_Set_OverrideCtrl(SOC_XWR68XX_PINR14_PADAN, PINMUX_OUTEN_RETAIN_HW_CTRL, PINMUX_INPEN_RETAIN_HW_CTRL);</span><br><span class="line">Pinmux_Set_FuncSel(SOC_XWR68XX_PINR14_PADAN, SOC_XWR68XX_PINR14_PADAN_QSPI_D2);</span><br><span class="line"></span><br><span class="line">Pinmux_Set_OverrideCtrl(SOC_XWR68XX_PINP12_PADAO, PINMUX_OUTEN_RETAIN_HW_CTRL, PINMUX_INPEN_RETAIN_HW_CTRL);</span><br><span class="line">Pinmux_Set_FuncSel(SOC_XWR68XX_PINP12_PADAO, SOC_XWR68XX_PINP12_PADAO_QSPI_D3);</span><br></pre></td></tr></table></figure>
<h2 id="qspi和qspi-flash初始化">qspi和qspi flash初始化</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QSPI_init();</span><br><span class="line">QSPIFlash_init();</span><br></pre></td></tr></table></figure>
<h2 id="qspi和qspi-flash打开">qspi和qspi flash打开</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">int32_t errCode;</span><br><span class="line">QSPI_Params QSPIParams;</span><br><span class="line">/* Open QSPI driver */</span><br><span class="line">QSPI_Params_init(&amp;QSPIParams);</span><br><span class="line"></span><br><span class="line">/* Set the QSPI peripheral clock to 200MHz */</span><br><span class="line">QSPIParams.qspiClk = 200 * 1000000U;</span><br><span class="line">QSPIParams.clkMode = QSPI_CLOCK_MODE_0;</span><br><span class="line">/* Running at 40MHz QSPI bit rate</span><br><span class="line">* QSPI bit clock rate derives from QSPI peripheral clock(qspiClk)</span><br><span class="line">    and divide clock internally down to bit clock rate</span><br><span class="line">    BitClockRate = qspiClk/divisor(=5, setup by QSPI driver internally)</span><br><span class="line">*/</span><br><span class="line">QSPIParams.bitRate = 40 * 1000000U;</span><br><span class="line">qspiHandle = QSPI_open(&amp;QSPIParams, &amp;errCode);</span><br><span class="line">if (qspiHandle == NULL)</span><br><span class="line">&#123;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">qspiFlashHandle = QSPIFlash_open(qspiHandle, &amp;errCode);</span><br><span class="line">if (qspiFlashHandle == NULL )</span><br><span class="line">&#123;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">return 1;</span><br></pre></td></tr></table></figure>
<h2 id="flash写入数据">flash写入数据</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">int32_t retVal;</span><br><span class="line">//erase</span><br><span class="line">retVal = QSPIFlash_sectorErase(qspiFlashHandle, flashOffset);</span><br><span class="line"></span><br><span class="line"> /* Configure in write read mode */</span><br><span class="line"> QSPIFlash_configMmapWrite(qspiFlashHandle);</span><br><span class="line"></span><br><span class="line"> //write</span><br><span class="line"> retVal = QSPIFlash_mmapWrite(qspiFlashHandle,</span><br><span class="line">                              (const uint32_t *)(flashOffset + QSPIFlash_getExtFlashAddr(qspiFlashHandle)),</span><br><span class="line">                              (size +7U)/8U,</span><br><span class="line">                              writeBuf);</span><br><span class="line"> return retVal;</span><br></pre></td></tr></table></figure>
<h2 id="flash读取数据">flash读取数据</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">uint32_t retVal = 0;</span><br><span class="line">//config qspiFlash read mode</span><br><span class="line">if(QSPIFlash_configMmapRead(qspiFlashHandle, FLASH_AUTO_MODE, &amp;retVal) &lt; 0)</span><br><span class="line">&#123;</span><br><span class="line">    retVal = -1;</span><br><span class="line">&#125;</span><br><span class="line">//read from QSPI flash in memory mapped mode</span><br><span class="line">retVal = QSPIFlash_mmapRead(qspiFlashHandle,</span><br><span class="line">                           (const uint32_t *)(flashOffset + QSPIFlash_getExtFlashAddr(qspiFlashHandle)),</span><br><span class="line">                           (size +7U)/8U,</span><br><span class="line">                           readBuf);</span><br><span class="line">return retVal;</span><br></pre></td></tr></table></figure>
<h1>参考文献</h1>
<ol>
<li>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wangguchao/article/details/105593303">基础——SPI与QSPI的异同，QSPI的具体协议是什么，QSPI有什么用</a></p>
</li>
<li>
<p>TI SDK驱动库(mmwave_sdk_03_05_00_04\packages\ti\drivers\qspi)</p>
</li>
<li>
<p>TI SDK驱动库(mmwave_sdk_03_05_00_04\packages\ti\drivers\qspiflash)</p>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xxiaojie.github.io/2025/04/25/radar/TI/IIC/IIC%20driver/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xiaojie.png">
      <meta itemprop="name" content="xiaojie">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaojie雷达说">
      <meta itemprop="description" content="分享雷达知识">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | xiaojie雷达说">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/04/25/radar/TI/IIC/IIC%20driver/" class="post-title-link" itemprop="url">IIC driver</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-04-25 23:19:14 / 修改时间：20:55:50" itemprop="dateCreated datePublished" datetime="2025-04-25T23:19:14+08:00">2025-04-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/" itemprop="url" rel="index"><span itemprop="name">radar</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/TI/" itemprop="url" rel="index"><span itemprop="name">TI</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>6.6k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>6 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Hello，大家好，我是Xiaojie，好久不见，欢迎大家能够和Xiaojie一起学习毫米波雷达知识，这篇文章主要是介绍IIC的基本知识以及TI SDK中的IIC驱动。</p>
<p>本文IIC的基础知识可参考文章《基础通信协议之 IIC (I2C) 详细讲解》</p>
<h1>基础知识</h1>
<h2 id="简介">简介</h2>
<p>IIC(Inter-Integrated Circuit)是IIC Bus简称，中文叫集成电路总线，是一种串行通信总线。</p>
<p>IIC总线使用两根信号线进行通信：一根时钟线SCL，一根数据线SDA。</p>
<p>开始信号：SCL处于高时，SDA拉低的动作</p>
<p>结束信号：SCL处于高时，SDA拉高的动作</p>
<p>传输数据时，SDA在SCL低电平时改变数据，在SCL高电平时保持数据，每个SCL脉冲的高电平传递1位数据</p>
<h2 id="主要特性">主要特性</h2>
<ul>
<li>
<p>IIC用两根信号线通信：串行数据线SDA，串行时钟线SCL；</p>
</li>
<li>
<p>IIC总线上所有器件的SDA、SCL引脚输出驱动都为开漏结构，通过外接上拉电阻实现总线上所有节点SDA<br>
、SCL信号的线与逻辑关系</p>
</li>
<li>
<p>IIC总线上的从机设备的地址是唯一的，有7位地址定义和10位地址定义。</p>
</li>
<li>
<p>IIC总线在任何时刻只存在简单的主从关系，按数据传输的方向，主机可以是主发送器或主接收器</p>
</li>
<li>
<p>IIC总线支持多主机，在总线上存在多个主机时，通过冲突检测和仲裁机制防止多个主机同时发起数据传输时存在的冲突</p>
</li>
<li>
<p>IIC总线上所有的器件都具有&quot;自动应答&quot;的功能，保证数据传输的正确性；主机和从机的区别在于对SCL的发送权，只有主机才能发送SCL</p>
</li>
</ul>
<h2 id="硬件结构">硬件结构</h2>
<h3 id="总线结构">总线结构</h3>
<p>IIC使用时钟线SCL和数据线SDA进行通信，且两根线上都要接上拉电阻使总线处于高电平状态，如下图为TI IWR6843的对IIC总线上接的上拉电阻。</p>
<img src="/2025/04/25/radar/TI/IIC/IIC%20driver/1.png" class="" title="放置图片">
<p>上拉电阻的取值有一定的要求，电阻太小会导致灌入电流过大，使低数据不稳定，甚至损坏端口；太大会导致信号上升缓慢，使得数据传输出错。</p>
<p>线与逻辑使得总线上不会出现数据冲突，实现了总线的仲裁控制，总线的控制权会交给最后一个输出低电平的设备，其他设备(输出高)通过检测总线上的电平状态(状态低)，对比与自己输出状态不一致，则自动退出对总线的控制请求，从而防止了总线上的数据冲突。</p>
<h3 id="总线的拉高和拉低">总线的拉高和拉低</h3>
<p>总线拉低：设备的逻辑电路控制FET打开，总线通过导通的FET连接到GND从而被拉低</p>
<p>总线拉高：设备的逻辑电路控制FET关闭，总线通过上拉电阻连接到VCC从而被拉高</p>
<img src="/2025/04/25/radar/TI/IIC/IIC%20driver/2.png" class="" title="放置图片">
<h2 id="工作时序">工作时序</h2>
<h3 id="数据有效性">数据有效性</h3>
<p>IIC的数据读取动作都是在SCL为高时产生的，SCL为低时是数据改变的时期，无论SDA如何变化都不影响读取。所以，传输数据的过程中，当SCL为高是，数据应当保持稳定，避免数据采集出错。</p>
<img src="/2025/04/25/radar/TI/IIC/IIC%20driver/3.png" class="" title="放置图片">
<h3 id="开始信号和结束信号">开始信号和结束信号</h3>
<p>开始信号：当SCL为高时，SDA从高到低的跳变产生开始信号</p>
<p>结束信号：当SCL为高时，SDA从低到高的跳变产生结束信号</p>
<img src="/2025/04/25/radar/TI/IIC/IIC%20driver/4.png" class="" title="放置图片">
<h3 id="重复开始信号">重复开始信号</h3>
<p>重复开始信号：在结束时不给出STOP信号，而以一个时钟周期内再次给出开始信号作为替代</p>
<h3 id="字节格式">字节格式</h3>
<p>SDA数据线上的每个字节必须是8位，对于每次传输的字节数没有限制，每个字节(8位)数据传输完毕后紧跟着应答信号(ACK，第9位)。数据的先后顺序位：高位在前。</p>
<img src="/2025/04/25/radar/TI/IIC/IIC%20driver/5.png" class="" title="放置图片">
<h3 id="应答信号">应答信号</h3>
<p>协议规定数据传输过程必须包含应答(ACK)。接收器通过应答告知发送的字节已被成功接收，之后发送器可以进行下一个字节的传输。主机产生数据传输过程中的所有时钟，包括用于应答的第九个时钟。发送器在应答时钟周期内释放对SDA总线的控制，这样接收器可以通过将SDA线拉低告知发送器，数据已被成功接收。</p>
<p>应答信号分为两种：</p>
<ol>
<li>
<p>当第9位(应答位)为低电平时，为ACK(Acknowledge)信号</p>
</li>
<li>
<p>当第9位(应答位)为高电平时，为NACK(Not Acknowledge)信号</p>
</li>
</ol>
<p>主机发送数据时，从机接收时，ACK信号由从机发出。当在SCL第9位时钟高电平信号期间，如果SDA仍然保持高电平，则主机可以直接产生STOP条件终止以后的传输或者继续ReSTART开始一个新的传输</p>
<p>从机发送数据时，主机读取数据时，ACK信号由主机给出，主机响应ACK表示还需要接收再接收数据，而当主机主机接受完想要的数据后，通过发送NACK告诉从机读取数据结束，释放总线。随机主机发送STOP命令，将总线释放，结束读操作、</p>
<img src="/2025/04/25/radar/TI/IIC/IIC%20driver/6.png" class="" title="放置图片">
<h2 id="设备的地址">设备的地址</h2>
<h3 id="7-bit设备的数据传输">7-bit设备的数据传输</h3>
<p>一个完整的7-bit通信过程如图所示：</p>
<img src="/2025/04/25/radar/TI/IIC/IIC%20driver/7.png" class="" title="放置图片">
<p>在START信号后的首字节由7位从机地址和1位读写位组成，结构如下图：</p>
<img src="/2025/04/25/radar/TI/IIC/IIC%20driver/8.png" class="" title="放置图片">
<p>发送完这个字节之后，主机释放SDA总线等待从机给出ACK应答，如果从机给出了ACK应答，表示从机地址正确并且已知晓是读还是写，便可以开始读写数据。如果从机没有没出给出ACK应答，则说明接收设备可能没有收到数据(如寻址的设备不存在或是设备正在忙)或无法解析收到的数据。</p>
<h3 id="10-bit设备的数据传输">10-bit设备的数据传输</h3>
<p>随着IIC设备日益增多，7位的从机地址逐渐不能满足使用，于是从机地址从7位扩充到10位。7位和10位地址的设备可以共存于同一个IIC总线系统互不冲突，展现了良好的兼容性。</p>
<p>10-bit地址的IIC设备需要2字节来传输从设备的地址信息，所以采用了这样的设计：第一个字节位1111 0+地址高两位(第10、9bit)+读写控制位，第二个字节位位从设备地址低8位，除此之外与7-bit设备相同。因为&quot;1111 0xx&quot;为IIC中特定保留的16个特殊指令地址中的一个，所以7-bit设备不会响应该首字节的呼叫，只有10-bit设备会响应，从而实现良好兼容。</p>
<h4 id="10-bit设备的写">10-bit设备的写</h4>
<img src="/2025/04/25/radar/TI/IIC/IIC%20driver/9.png" class="" title="放置图片">
<h4 id="10-bit设备的读">10-bit设备的读</h4>
<img src="/2025/04/25/radar/TI/IIC/IIC%20driver/10.png" class="" title="放置图片">
<h1>TI驱动以及函数代码实现</h1>
<h2 id="ti驱动代码">TI驱动代码</h2>
<h3 id="i2c-init">I2C_init</h3>
<p><strong>函数原型：</strong></p>
<pre><code>void 	I2C_init (void)	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>初始化IIC模块
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>无
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>无
</code></pre>
<h3 id="i2c-params-init">I2C_Params_init</h3>
<p><strong>函数原型：</strong></p>
<pre><code>void 	I2C_Params_init (I2C_Params *params)
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>将I2C_Params结构体初始化为默认值
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>params：指向I2C_Params指针，用于初始化
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>无
</code></pre>
<h3 id="i2c-open">I2C_open</h3>
<p><strong>函数原型：</strong></p>
<pre><code>I2C_Handle 	I2C_open (uint32_t index, I2C_Params *params)
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>初始化由特定索引值指定的给定I2C外围设备。且params指定I2C的运行模式
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>index：索引到I2C_config表中的I2C逻辑外设编号
params：指向参数块的指针。如果指定NULL，将使用默认值。此结构中的所有字段都被视为只读
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>当函数执行成功时，返回I2C的句柄，当函数执行失败时，返回NULL值
</code></pre>
<h3 id="i2c-control">I2C_control</h3>
<p><strong>函数原型：</strong></p>
<pre><code>int32_t I2C_control(I2C_Handle 	handle,
                    uint32_t 	cmd,
                    void * 	arg 
                    )	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>在给定的I2C_Handle执行特定功能的实现

I2C_control的命令可以来自I2C.h或特定于实现的I2C.h文件。

虽然来自I2C.h的命令在驱动程序实现中是可以移植的，但并非所有实现都可以支持所有这些命令。

相反，来自驱动程序实现特定的I2C.h文件的命令添加了独特的驱动程序功能，但并非API可移植到所有I2C驱动程序实现中

I2C.h支持命令遵循I2C_CMD命令的约定。每个控制命令对arg的定义不同。每个命令都纪录了arg的类型
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>handle：I2C句柄

cmd：I2C.h中的命令

arg：cmd附带的可选R/W(du/写)命令参数
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>实现特定的返回值。负值表示操作不成功
</code></pre>
<h3 id="i2c-transfer">I2C_transfer</h3>
<p><strong>函数原型：</strong></p>
<pre><code>bool I2C_transfer(I2C_Handle handle,
                  I2C_Transaction * transaction 
                  )	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>与I2C从设备执行I2C传输。

此函数将启动I2C传输，并且只能在I2C_MODE_BLOCKING中下调用。
I2C传输过程中需要评估写入多少字节以及要从I2C外围设备读取多少字节。
任务写入的数据都将在读取数据之前发送。

写入外围设备的数据前面有外围设备的7为I2C从属地址(写入位)。
在所有数据传输完毕后，驱动程序将评估是否需要从设备中读取任何数据。
如果是这样，则会发送一个重新启动位，以及相同的7位I2C从机地址(读取位)。
否则，传输STOP位结束。在I2C读取指定数量的字节后，传输以NACK和STOP位终止。

在I2C_MODE_BLOCKING中，I2C_transfer将阻止任务执行，直到任务完成。
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>handle：I2C句柄

transaction：指向I2C_Transcation的指针
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>在I2C_MODE_BLOCKING中，传输成功后返回为true，错误后返回为false
</code></pre>
<h3 id="i2c-cancel">I2C_cancel</h3>
<p><strong>函数原型：</strong></p>
<pre><code>void I2C_cancel	(I2C_Handle 	handle)	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>取消全部I2C传输
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>handle：I2C句柄
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>无
</code></pre>
<h3 id="i2c-close">I2C_close</h3>
<p><strong>函数原型：</strong></p>
<pre><code>void I2C_close	(I2C_Handle 	handle)	
</code></pre>
<p><strong>函数功能：</strong></p>
<pre><code>关闭I2C句柄指定的外围设备
</code></pre>
<p><strong>函数参数：</strong></p>
<pre><code>handle：I2C句柄
</code></pre>
<p><strong>函数返回值：</strong></p>
<pre><code>无
</code></pre>
<h2 id="代码案例">代码案例</h2>
<h3 id="gpio复用">GPIO复用</h3>
<p>硬件上PIN脚G14为SCL时钟线，PIN脚F13为SDA数据线，如下代码将G14复用为I2C_SCL线，将F13复用为I2C_SDA线</p>
<img src="/2025/04/25/radar/TI/IIC/IIC%20driver/11.png" class="" title="放置图片">
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/* Setup the PINMUX to I2C*/</span><br><span class="line">//sda</span><br><span class="line">Pinmux_Set_OverrideCtrl(SOC_XWR68XX_PINF13_PADAH, PINMUX_OUTEN_RETAIN_HW_CTRL, PINMUX_INPEN_RETAIN_HW_CTRL);</span><br><span class="line">Pinmux_Set_FuncSel(SOC_XWR68XX_PINF13_PADAH, SOC_XWR68XX_PINF13_PADAH_I2C_SDA);</span><br><span class="line">//scl</span><br><span class="line">Pinmux_Set_OverrideCtrl(SOC_XWR68XX_PING14_PADAI, PINMUX_OUTEN_RETAIN_HW_CTRL, PINMUX_INPEN_RETAIN_HW_CTRL);</span><br><span class="line">Pinmux_Set_FuncSel(SOC_XWR68XX_PING14_PADAI, SOC_XWR68XX_PING14_PADAI_I2C_SCL);</span><br></pre></td></tr></table></figure>
<h3 id="i2c初始化">I2C初始化</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">I2C_init();</span><br></pre></td></tr></table></figure>
<h3 id="i2c打开">I2C打开</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">I2C_Params i2cParams;</span><br><span class="line">uint32_t arg;</span><br><span class="line">int32_t errCode = 0;</span><br><span class="line">/* Initialize the I2C driver default parameters */</span><br><span class="line">I2C_Params_init(&amp;i2cParams);</span><br><span class="line"></span><br><span class="line">i2cParams.transferMode = I2C_MODE_BLOCKING;</span><br><span class="line">i2cParams.bitRate = I2C_100kHz;</span><br><span class="line"></span><br><span class="line">/* Open the I2C driver */</span><br><span class="line">i2cHandle = I2C_open(0, &amp;i2cParams);</span><br><span class="line"></span><br><span class="line">if (i2cHandle == NULL)</span><br><span class="line">&#123;</span><br><span class="line">    System_printf (&quot;i2cHandle is null \n&quot;);</span><br><span class="line">    return -1;</span><br><span class="line">&#125;</span><br><span class="line">arg = 0;//arg set to 0, and the I2C addr mode is 7-bit.</span><br><span class="line">errCode = I2C_control (i2cHandle, I2C_CMD_ADDR_MODE, (void* )&amp;arg);</span><br><span class="line">if (errCode &lt; 0)</span><br><span class="line">&#123;</span><br><span class="line">    System_printf (&quot;Error: I2C control Set I2C_CMD_ADDR_MODE failed [Error code %d]\n&quot;, errCode);</span><br><span class="line">    return -1;</span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">&#123;</span><br><span class="line">    System_printf (&quot;I2C_control success\n&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="i2c写数据">I2C写数据</h3>
<p>写单个字节</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * 写一个字节</span><br><span class="line"> * slaveAddress:从机地址</span><br><span class="line"> * addr:从机内部地址</span><br><span class="line"> * data:要往从机内部地址写入的数据</span><br><span class="line"> * */</span><br><span class="line">int8_t iicWriteOneByte(uint32_t slaveAddress,uint8_t addr,uint8_t data)</span><br><span class="line">&#123;</span><br><span class="line">    int8_t retVal;</span><br><span class="line">    I2C_Transaction i2cTransaction;</span><br><span class="line">    uint8_t txData[2];</span><br><span class="line">    txData[0] = addr;txData[1] = data;</span><br><span class="line">    i2cTransaction.slaveAddress = slaveAddress;//LP87524B/J-Q1 Device Address = 0x60</span><br><span class="line">    i2cTransaction.writeBuf = txData;</span><br><span class="line">    i2cTransaction.writeCount = 2;</span><br><span class="line">    i2cTransaction.readBuf = NULL;</span><br><span class="line">    i2cTransaction.readCount = 0;</span><br><span class="line">    retVal = I2C_transfer(i2cHandle, &amp;i2cTransaction);</span><br><span class="line">    return retVal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>写多个字节</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * 写多个字节</span><br><span class="line"> * */</span><br><span class="line">int8_t iicWriteData(uint32_t slaveAddress,uint8_t addr,uint8_t * data,uint16_t size)</span><br><span class="line">&#123;</span><br><span class="line">    uint16_t index;</span><br><span class="line">    int8_t retVal;</span><br><span class="line">    for (index = 0; index &lt; size; index++)</span><br><span class="line">    &#123;</span><br><span class="line">        retVal = YIECT_iicWriteOneByte(slaveAddress,addr,*data); //写入</span><br><span class="line">        addr++;data++; //地址和要写入的数据的地址均++</span><br><span class="line">    &#125;</span><br><span class="line">    return retVal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="i2c读数据">I2C读数据</h3>
<p>读一个字节</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * 读一个字节</span><br><span class="line"> * slaveAddress:从机地址</span><br><span class="line"> * addr:从机内部地址</span><br><span class="line"> * data:读出的数据</span><br><span class="line"> * */</span><br><span class="line">int8_t iicReadOneByte(uint32_t slaveAddress,uint8_t addr,uint8_t * data)</span><br><span class="line">&#123;</span><br><span class="line">    int8_t retVal;</span><br><span class="line">    I2C_Transaction i2cTransaction;</span><br><span class="line">    uint8_t txData[1];</span><br><span class="line">    txData[0] = addr;</span><br><span class="line">    i2cTransaction.slaveAddress = slaveAddress;//LP87524B/J-Q1 Device Address = 0x60</span><br><span class="line">    i2cTransaction.writeBuf = txData;</span><br><span class="line">    i2cTransaction.writeCount = 1;</span><br><span class="line">    i2cTransaction.readBuf = data;</span><br><span class="line">    i2cTransaction.readCount = 1;</span><br><span class="line">    retVal = I2C_transfer(i2cHandle, &amp;i2cTransaction);</span><br><span class="line">    return retVal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>读多个字节</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * 读多个字节</span><br><span class="line"> * */</span><br><span class="line">int8_t iicReadData(uint32_t slaveAddress,uint8_t addr,uint8_t * data,uint16_t size)</span><br><span class="line">&#123;</span><br><span class="line">    int8_t retVal;</span><br><span class="line">    uint16_t index;</span><br><span class="line">    for (index = 0; index &lt; size; index++)</span><br><span class="line">    &#123;</span><br><span class="line">        retVal = YIECT_iicReadOneByte(slaveAddress,addr,data); //读出</span><br><span class="line">        addr++;data++; //地址和要写入的数据的地址均++</span><br><span class="line">    &#125;</span><br><span class="line">    return retVal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>参考文献</h1>
<ol>
<li>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_39829913/article/details/104718185">基础通信协议之 IIC (I2C) 详细讲解</a></p>
</li>
<li>
<p>TI SDK驱动库(mmwave_sdk_03_05_00_04\packages\ti\drivers\i2c)</p>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xxiaojie.github.io/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(8)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xiaojie.png">
      <meta itemprop="name" content="xiaojie">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaojie雷达说">
      <meta itemprop="description" content="分享雷达知识">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | xiaojie雷达说">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(8)/" class="post-title-link" itemprop="url">DDMA signal&data Process(8)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-04-20 15:58:14 / 修改时间：15:26:21" itemprop="dateCreated datePublished" datetime="2025-04-20T15:58:14+08:00">2025-04-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/" itemprop="url" rel="index"><span itemprop="name">radar</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/DDMA-radar/" itemprop="url" rel="index"><span itemprop="name">DDMA radar</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>5.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>5 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Hello，大家好，我是Xiaojie，好久不见，欢迎大家能够和Xiaojie一起学习毫米波雷达知识，Xiaojie准备连载一个系列的文章—DDMA信号处理以及数据处理的流程，本系列文章将从目标生成、信号仿真、测距、测速、cfar检测、测角、目标聚类、目标跟踪这几个模块逐步介绍，这个系列的文章大约是一个7-8篇左右。</p>
<p>最终效果如下：</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(8)/1.gif" class="" title="放置图片">
<p>整体文件的目录树如下：</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(8)/2.png" class="" title="放置图片">
<p>本篇文章主要讲的是跟踪部分，也是本系列文章最后一篇文章，主要分为两部分关联和跟踪，跟踪是指将对目标进行跟踪，主要采用卡尔曼滤波；关联是指将目标的聚类和跟踪后的结果进行关联。</p>
<p><strong><font color ="red">代码链接：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1AYGbRzOa8dMkh00jLeQs4g%EF%BC%8C%E5%AF%86%E7%A0%81%E5%9C%A8%E6%96%87%E6%9C%AB%E3%80%82">https://pan.baidu.com/s/1AYGbRzOa8dMkh00jLeQs4g，密码在文末。</a></font></strong></p>
<h1>基础知识</h1>
<h2 id="关联算法">关联算法</h2>
<p>关联是采用的是最近邻算法，将航迹与聚类进行关联</p>
<h2 id="跟踪算法">跟踪算法</h2>
<p>卡尔曼滤波，可以参考B站UP主DR_CAN的录制视频，<a target="_blank" rel="noopener" href="https://space.bilibili.com/230105574/channel/collectiondetail?sid=1814741">链接点击这里</a>，讲述了卡尔曼滤波的五个公式的推导过程。</p>
<h1>代码仿真</h1>
<h2 id="associateprocess-m文件">associateProcess.m文件</h2>
<p>trackProcess.m是关联算法，将航迹与聚类进行关联</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">function parameter = associateProcess(parameter)</span><br><span class="line"></span><br><span class="line">    trackNums = parameter.trackPara.trackCurrNums; %航迹数目</span><br><span class="line">    clusterNums = parameter.clusterPara.clusterCurrNums; %聚类数目</span><br><span class="line">    %航迹和聚类关联</span><br><span class="line">    for trackIdx = 1:1:trackNums</span><br><span class="line">        trackLa = parameter.trackPara.trackMsg(trackIdx).la; %航迹的纵距</span><br><span class="line">        trackLo = parameter.trackPara.trackMsg(trackIdx).lo; %航迹的横距</span><br><span class="line">        Thresh = 9999;</span><br><span class="line">        for clusterIdx = 1:1:clusterNums</span><br><span class="line">            clusterLa = parameter.clusterPara.clusterTarget(clusterIdx).la; %聚类的纵距</span><br><span class="line">            clusterLo = parameter.clusterPara.clusterTarget(clusterIdx).lo; %聚类的横距</span><br><span class="line">            EuclideanDistance = sqrt((trackLa - clusterLa).^2 + (trackLo - clusterLo).^2); %欧式距离</span><br><span class="line">            if EuclideanDistance &lt; Thresh</span><br><span class="line">                parameter.trackPara.trackTarget(trackIdx).kalmanFilterPara.associateValue = [clusterLa;clusterLo]; %关联值赋值</span><br><span class="line">                Thresh = EuclideanDistance;</span><br><span class="line">            end</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h2 id="trackprocess-m文件">trackProcess.m文件</h2>
<p>trackProcess.m是跟踪处理的主函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">%% 跟踪处理</span><br><span class="line">function [parameter] = trackProcess(parameter)</span><br><span class="line"></span><br><span class="line">    for trackIdx = 1:1:parameter.trackPara.trackCurrNums</span><br><span class="line">        %当前的测量值为关联的聚类值</span><br><span class="line">        currMeasurement = parameter.trackPara.trackTarget(trackIdx).kalmanFilterPara.associateValue;</span><br><span class="line">        %卡尔曼估计</span><br><span class="line">        [parameter.trackPara.trackTarget(trackIdx)] = kalmanCore(parameter.trackPara.trackTarget(trackIdx),currMeasurement);</span><br><span class="line">        %卡尔曼估计最优值赋值</span><br><span class="line">        parameter.trackPara.trackMsg(trackIdx).la = parameter.trackPara.trackTarget(trackIdx).kalmanFilterPara.optimizeState(1);</span><br><span class="line">        parameter.trackPara.trackMsg(trackIdx).lo = parameter.trackPara.trackTarget(trackIdx).kalmanFilterPara.optimizeState(2);</span><br><span class="line">        parameter.trackPara.trackMsg(trackIdx).V_La = parameter.trackPara.trackTarget(trackIdx).kalmanFilterPara.optimizeState(3);</span><br><span class="line">        parameter.trackPara.trackMsg(trackIdx).V_Lo = parameter.trackPara.trackTarget(trackIdx).kalmanFilterPara.optimizeState(4);</span><br><span class="line">        %计算左下角点</span><br><span class="line">        parameter.trackPara.trackMsg(trackIdx).leftDownCornerLa = parameter.trackPara.trackMsg(trackIdx).la - 2;</span><br><span class="line">        parameter.trackPara.trackMsg(trackIdx).leftDownCornerLo = parameter.trackPara.trackMsg(trackIdx).lo - 2;</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h2 id="kalmancore-m文件">kalmanCore.m文件</h2>
<p>kalmanCore.m是卡尔曼滤波的核心函数，囊括了卡尔曼滤波的五个公式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">%% 卡尔曼核心函数</span><br><span class="line">function [parameter] = kalmanCore(parameter,currMeasurement)</span><br><span class="line"></span><br><span class="line">    %1. 估计下一个状态</span><br><span class="line">    parameter.kalmanFilterPara.optimizeState = ...</span><br><span class="line">        parameter.kalmanFilterPara.A * parameter.kalmanFilterPara.optimizeState + ...</span><br><span class="line">        parameter.kalmanFilterPara.B * parameter.kalmanFilterPara.u;</span><br><span class="line">    %2. 估计协方差矩阵</span><br><span class="line">    parameter.kalmanFilterPara.P = ...</span><br><span class="line">        parameter.kalmanFilterPara.A * ...</span><br><span class="line">        parameter.kalmanFilterPara.P * ...</span><br><span class="line">        parameter.kalmanFilterPara.A&#x27; + ...</span><br><span class="line">        parameter.kalmanFilterPara.Q;</span><br><span class="line">    %3. 更新卡尔曼增益</span><br><span class="line">    kalmanGain = parameter.kalmanFilterPara.P * ...</span><br><span class="line">        parameter.kalmanFilterPara.H&#x27; * ...</span><br><span class="line">        inv(parameter.kalmanFilterPara.H * ...</span><br><span class="line">        parameter.kalmanFilterPara.P * ...</span><br><span class="line">        parameter.kalmanFilterPara.H&#x27; + ...</span><br><span class="line">        parameter.kalmanFilterPara.R); %计算卡尔曼增益</span><br><span class="line">    %4. 最优估计</span><br><span class="line">    parameter.kalmanFilterPara.optimizeState = ...</span><br><span class="line">        parameter.kalmanFilterPara.optimizeState + ...</span><br><span class="line">        kalmanGain * ...</span><br><span class="line">        (currMeasurement - ...</span><br><span class="line">        parameter.kalmanFilterPara.H * ...</span><br><span class="line">        parameter.kalmanFilterPara.optimizeState);</span><br><span class="line">%     currOptimzieEstimateState = parameter.kalmanFilterPara.optimizeState;</span><br><span class="line">    %5. 更新协方差矩阵</span><br><span class="line">    parameter.kalmanFilterPara.P = ...</span><br><span class="line">        (parameter.kalmanFilterPara.I - ...</span><br><span class="line">        kalmanGain * ...</span><br><span class="line">        parameter.kalmanFilterPara.H) * ...</span><br><span class="line">        parameter.kalmanFilterPara.P;</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h2 id="trackcreate-m文件">trackCreate.m文件</h2>
<p>trackCreate.m文件主要是进行航迹创建</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">function parameter = trackCreate(parameter)</span><br><span class="line"></span><br><span class="line">    % 聚类数目</span><br><span class="line">    clusterNums = parameter.clusterPara.clusterCurrNums;</span><br><span class="line">    % 循环所有聚类数目</span><br><span class="line">    for clusterIdx = 1:1:clusterNums</span><br><span class="line">        if parameter.trackPara.trackTarget(clusterIdx).exist == 0 %判断当前航迹是否存在，不存在测新建</span><br><span class="line">            clusterCount = parameter.clusterPara.clusterTarget(clusterIdx).count; %当前聚类存在的次数</span><br><span class="line">        </span><br><span class="line">            if clusterCount &gt; parameter.trackPara.trackCreateThresh %大于航迹创建的阈值，则新建航迹</span><br><span class="line">                parameter.trackPara.trackCurrNums = ...</span><br><span class="line">                    parameter.trackPara.trackCurrNums + 1; %航迹数增加</span><br><span class="line">                % 最优估计值赋值</span><br><span class="line">                parameter.trackPara.trackTarget(clusterIdx).kalmanFilterPara.optimizeState(1) = ...</span><br><span class="line">                    parameter.clusterPara.clusterTarget(clusterIdx).la;</span><br><span class="line">                parameter.trackPara.trackTarget(clusterIdx).kalmanFilterPara.optimizeState(2) = ...</span><br><span class="line">                    parameter.clusterPara.clusterTarget(clusterIdx).lo;</span><br><span class="line">                parameter.trackPara.trackTarget(clusterIdx).kalmanFilterPara.optimizeState(3) = ...</span><br><span class="line">                    parameter.clusterPara.clusterTarget(clusterIdx).V_La;</span><br><span class="line">                parameter.trackPara.trackTarget(clusterIdx).kalmanFilterPara.optimizeState(4) = ...</span><br><span class="line">                    parameter.clusterPara.clusterTarget(clusterIdx).V_Lo;</span><br><span class="line">                % 航迹横距纵距赋值</span><br><span class="line">                parameter.trackPara.trackMsg(clusterIdx).la = ...</span><br><span class="line">                    parameter.clusterPara.clusterTarget(clusterIdx).la;</span><br><span class="line">                parameter.trackPara.trackMsg(clusterIdx).lo = ...</span><br><span class="line">                    parameter.clusterPara.clusterTarget(clusterIdx).lo;</span><br><span class="line">                % 航迹左下角点赋值</span><br><span class="line">                parameter.trackPara.trackMsg(clusterIdx).leftDownCornerLa = ...</span><br><span class="line">                    parameter.trackPara.trackMsg(clusterIdx).la - 2;</span><br><span class="line">                parameter.trackPara.trackMsg(clusterIdx).leftDownCornerLo = ...    </span><br><span class="line">                    parameter.trackPara.trackMsg(clusterIdx).lo - 2;</span><br><span class="line">                % 标记航迹存在</span><br><span class="line">                parameter.trackPara.trackTarget(clusterIdx).exist = 1;</span><br><span class="line">            end</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">    </span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p><strong><font color ="red">代码链接密码：cz71</font></strong></p>
<p>代码只供用于个人学习，切勿用于商用</p>
<p><strong>至此，本系列文章就此结束了。</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xxiaojie.github.io/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(7)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xiaojie.png">
      <meta itemprop="name" content="xiaojie">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaojie雷达说">
      <meta itemprop="description" content="分享雷达知识">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | xiaojie雷达说">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(7)/" class="post-title-link" itemprop="url">DDMA signal&data Process(7)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-04-20 14:58:14 / 修改时间：15:29:25" itemprop="dateCreated datePublished" datetime="2025-04-20T14:58:14+08:00">2025-04-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/" itemprop="url" rel="index"><span itemprop="name">radar</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/DDMA-radar/" itemprop="url" rel="index"><span itemprop="name">DDMA radar</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>9.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>8 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Hello，大家好，我是Xiaojie，好久不见，欢迎大家能够和Xiaojie一起学习毫米波雷达知识，Xiaojie准备连载一个系列的文章—DDMA信号处理以及数据处理的流程，本系列文章将从目标生成、信号仿真、测距、测速、cfar检测、测角、目标聚类、目标跟踪这几个模块逐步介绍，这个系列的文章大约是一个7-8篇左右。</p>
<p>最终效果如下：</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(7)/1.gif" class="" title="放置图片">
<p>整体文件的目录树如下：</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(7)/2.png" class="" title="放置图片">
<p>从这篇文章开始就开始进入数据处理部分了，本篇文章主要讲的是聚类部分，主要采用的聚类方法是dbscan。当雷达信号处理部分做完后，会得到目标的点云，包括距离、速度、角度。</p>
<h1>dbscan聚类</h1>
<p>dbscan(Density-Based Spatial Clustering of Application with Noise)是一种基于密度的聚类算法。</p>
<p>密度聚类算法一般假定类别是可以通过样本分布的紧密程度来决定。在同一个类别中，样本之间是紧密相连的，也就是通过将紧密相连的样本划分为一类，这样就产生了一个聚类类别。</p>
<ol>
<li>
<p>核心思想：dbscan的核心思想在于基于样本点的密度进行聚类，即通过找出样本空间中密集的区域进行簇的划分</p>
</li>
<li>
<p>算法参数：dbscan需要两个主要参数：邻域半径和最少点数目。只有当某点在其邻域内的点数大于或等于最少点数目时，该点才被视为核心点。</p>
</li>
<li>
<p>点类别：dbscan中的点分为三类：核心点、边界点和噪声点。核心点是指那些在邻域内具有足够多的点的对象，边界点则是那些邻近核心点但自身不是核心点，而噪声点则既不是核心点也不是边界点</p>
</li>
<li>
<p>点关系：dbscan中的点关系包括密度直达、密度可达和密度相连。这些关系定义了如何从一个核心点扩展至整个簇。</p>
</li>
</ol>
<p>这里可能说的比较官方，实际上网上也会有很多关于dbscan聚类算法的解释，就不在这里再多赘述了。</p>
<h1>代码仿真</h1>
<h2 id="clusterprocess-m文件">clusterProcess.m文件</h2>
<p>clusterProcess.m文件是聚类的核心主函数，调用dbscanCore核心函数，计算聚类信息函数，以及聚类合并函数</p>
<p>代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br><span class="line">%%点云处理模块</span><br><span class="line">%%1. dbscan聚类</span><br><span class="line">%%2. 计算聚类信息</span><br><span class="line">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br><span class="line">function [parameter,pointList] = clusterProcess(parameter,pointList,pointNums)</span><br><span class="line">    %% dbscan聚类</span><br><span class="line">    [pointList,clusterNums] = dbscanCore(parameter.clusterPara,pointList,pointNums);</span><br><span class="line">    %% 计算聚类信息</span><br><span class="line">    parameter = calClusterMsg(parameter,pointList,pointNums,clusterNums);</span><br><span class="line">    %% 聚类合并</span><br><span class="line">    if parameter.frameCount ~= 1 %后面进行聚类合并</span><br><span class="line">        parameter = clusterMergeCluster(parameter);</span><br><span class="line">    else %第一帧聚类直接赋值</span><br><span class="line">        parameter = clusterEqualNewCluster(parameter);</span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h2 id="dbscancore-m文件">dbscanCore.m文件</h2>
<p>dbscanCore.m文件是聚类核心函数，将点云通过聚类算法划分为不同的类别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">%% dbscan聚类核心函数</span><br><span class="line">function [pointList,clusterNums] = dbscanCore(clusterPara,pointList,pointNums)</span><br><span class="line"></span><br><span class="line">    [pointDistance] = calPointEuclideanDistance(pointList,pointNums); %计算点云的距离速度角度欧式距离</span><br><span class="line">    clusterNums = 0; %聚类数目初始化</span><br><span class="line">    IDX=zeros(pointNums,1);</span><br><span class="line">    pointIsVisited = zeros(pointNums,1); %初始化所有点云都未被初始化</span><br><span class="line"></span><br><span class="line">    for pointIdx = 1:1:pointNums %循环所有点</span><br><span class="line"></span><br><span class="line">        if ~pointIsVisited(pointIdx) %当前点没被访问过</span><br><span class="line">            </span><br><span class="line">            pointIsVisited(pointIdx) = 1; %标记当前点被访问过</span><br><span class="line">            neighbor = getPointNeighbor(pointDistance,pointIdx,clusterPara); %获取领域点数</span><br><span class="line">            neighborNums = numel(neighbor); %领域点数</span><br><span class="line">            if neighborNums &lt; clusterPara.minPoints %领域点数小于阈值</span><br><span class="line">            else %领域点数大于阈值</span><br><span class="line">                clusterNums = clusterNums + 1; %聚类数目增加</span><br><span class="line">                expandCluster(pointIdx,neighbor,clusterNums); %根据当前点访问领域点扩充</span><br><span class="line">            end</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">    </span><br><span class="line">    function expandCluster(pointIdx,neighbor,clusterNums)</span><br><span class="line">        IDX(pointIdx)=clusterNums; %标记当前点云属于几号聚类</span><br><span class="line">        pointList(pointIdx).clusterId = clusterNums; %标记当前点云属于几号聚类</span><br><span class="line">        count = 1; %计数器</span><br><span class="line">        while true</span><br><span class="line">            </span><br><span class="line">            pointIdxTmp = neighbor(count); %获取领域中的其他点云ID</span><br><span class="line">            if ~pointIsVisited(pointIdxTmp) %该点云没有被访问过</span><br><span class="line">                pointIsVisited(pointIdxTmp) = 1; %标记其被访问过</span><br><span class="line">                neighbor2 = getPointNeighbor(pointDistance,pointIdxTmp,clusterPara); %获取pointIdxTmp的领域点数</span><br><span class="line">                neighbor2Nums = numel(neighbor2); %领域点数</span><br><span class="line">                if neighbor2Nums &gt;= clusterPara.minPoints %领域点数大于阈值</span><br><span class="line">                    neighbor = [neighbor,neighbor2]; %扩充neighbor</span><br><span class="line">                end</span><br><span class="line">            end</span><br><span class="line">            if IDX(pointIdxTmp)==0 %当前点属于空闲点</span><br><span class="line">                IDX(pointIdxTmp)=clusterNums; %标记为几号聚类</span><br><span class="line">                pointList(pointIdxTmp).clusterId = clusterNums; %标记为几号聚类</span><br><span class="line">            end</span><br><span class="line">            count = count + 1; %计数器累加</span><br><span class="line">            </span><br><span class="line">            if count &gt; numel(neighbor) %循环完毕所有邻域中的点云</span><br><span class="line">                break;</span><br><span class="line">            end</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h2 id="calpointeuclideandistance-m文件">calPointEuclideanDistance.m文件</h2>
<p>calPointEuclideanDistance.m文件是计算点云与点云之间的欧式距离</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br><span class="line">%%计算距离、速度、角度的欧式距离</span><br><span class="line">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br><span class="line">function [pointDistance] = calPointEuclideanDistance(pointList,pointNums)</span><br><span class="line"></span><br><span class="line">    for pointIdxI = 1:1:pointNums</span><br><span class="line">        for pointIdxJ = 1:1:pointNums</span><br><span class="line">            %距离欧式距离</span><br><span class="line">            pointDistance.rangeD(pointIdxI,pointIdxJ) = ...</span><br><span class="line">                sqrt((abs(pointList(pointIdxI).range)-abs(pointList(pointIdxJ).range)).^2);</span><br><span class="line">            %速度欧式距离</span><br><span class="line">            pointDistance.speedD(pointIdxI,pointIdxJ) = ...</span><br><span class="line">                sqrt((abs(pointList(pointIdxI).speed)-abs(pointList(pointIdxJ).speed)).^2);</span><br><span class="line">            %角度欧式距离</span><br><span class="line">            pointDistance.angleD(pointIdxI,pointIdxJ) = ...</span><br><span class="line">                sqrt((abs(pointList(pointIdxI).angle)-abs(pointList(pointIdxJ).angle)).^2);</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h2 id="getpointneighbor-m文件">getPointNeighbor.m文件</h2>
<p>getPointNeighbor.m文件是获取当前点的邻域信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">%% 获取当前点的领域信息</span><br><span class="line">function neighbor = getPointNeighbor(pointDistance,currPointIdx,clusterPara)</span><br><span class="line"></span><br><span class="line">    neighbor = [];</span><br><span class="line">    pointRangeDistance = pointDistance.rangeD;[rangeRow,rangeCol] = size(pointRangeDistance);</span><br><span class="line">    pointSpeedDistance = pointDistance.speedD;[speedRow,speedCol] = size(pointSpeedDistance);</span><br><span class="line">    pointAngleDistance = pointDistance.angleD;[angleRow,angleCol] = size(pointAngleDistance);</span><br><span class="line">    if (rangeCol == speedCol) &amp;&amp; (rangeCol == angleCol) &amp;&amp; (speedCol &amp;&amp; angleCol)</span><br><span class="line">        for colIdx = 1:1:rangeCol</span><br><span class="line">            if pointRangeDistance(currPointIdx,colIdx) &lt; clusterPara.rangeThreshold &amp;&amp; ...</span><br><span class="line">                pointSpeedDistance(currPointIdx,colIdx) &lt; clusterPara.speedThreshold &amp;&amp; ...</span><br><span class="line">                pointAngleDistance(currPointIdx,colIdx) &lt; clusterPara.angleThreshold</span><br><span class="line">            </span><br><span class="line">                neighbor = [neighbor, colIdx];</span><br><span class="line">                </span><br><span class="line">            end</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="clustermergecluster-m">clusterMergeCluster.m</h2>
<p>clusterMergeCluster.m文件是将新建的聚类和已经存在的聚类斤进行合并</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">function parameter = clusterMergeCluster(parameter)</span><br><span class="line"></span><br><span class="line">    distanceThresh = 6; %合并聚类的阈值</span><br><span class="line">%     clusterCurrNums = 0;</span><br><span class="line">    for newClusterIdx = 1:1:parameter.clusterPara.newClusterCurrNums %下一帧形成聚类</span><br><span class="line"></span><br><span class="line">        newLa = parameter.clusterPara.newClusterTarget(newClusterIdx).la;</span><br><span class="line">        newLo = parameter.clusterPara.newClusterTarget(newClusterIdx).lo;</span><br><span class="line">        newVLa = parameter.clusterPara.newClusterTarget(newClusterIdx).V_La;</span><br><span class="line">        newVLo = parameter.clusterPara.newClusterTarget(newClusterIdx).V_Lo;</span><br><span class="line">        maxDistance = 999; %默认最大距离</span><br><span class="line">        updateClusterIdx = -1; %要更新的ID</span><br><span class="line">        distance = -1; %默认距离</span><br><span class="line">        for clusterIdx = 1:1:parameter.clusterPara.clusterCurrNums %已经存在的聚类</span><br><span class="line">                la = parameter.clusterPara.clusterTarget(clusterIdx).la;</span><br><span class="line">                lo = parameter.clusterPara.clusterTarget(clusterIdx).lo;</span><br><span class="line">                vLa = parameter.clusterPara.clusterTarget(clusterIdx).V_La;</span><br><span class="line">                vLo = parameter.clusterPara.clusterTarget(clusterIdx).V_Lo;</span><br><span class="line">                distance = sqrt((abs(la) - abs(newLa)).^2 + (abs(lo) - abs(newLo)).^2 + ...</span><br><span class="line">                    (abs(vLa) - abs(newVLa)).^2 + (abs(vLo) - abs(newVLo)).^2);</span><br><span class="line">                if distance &lt; maxDistance &amp;&amp; distance &lt; distanceThresh %取最小值</span><br><span class="line">                    updateClusterIdx = clusterIdx;</span><br><span class="line">%                     distance = maxDistance;</span><br><span class="line">                    maxDistance = distance;</span><br><span class="line">                end</span><br><span class="line">        end</span><br><span class="line">        if updateClusterIdx == -1 %新建聚类</span><br><span class="line">                clusterCurrNums = parameter.clusterPara.clusterCurrNums + 1; %TODO</span><br><span class="line">                parameter.clusterPara.clusterTarget(clusterCurrNums) = ...</span><br><span class="line">                    parameter.clusterPara.newClusterTarget(newClusterIdx); %聚类赋值</span><br><span class="line">                parameter.clusterPara.newClusterTarget(clusterCurrNums).isMerge = 2;</span><br><span class="line">        else  %以前存在的聚类</span><br><span class="line">            isMerge = parameter.clusterPara.newClusterTarget(updateClusterIdx).isMerge; %获取合并标志</span><br><span class="line">            if isMerge == 0 %表明聚类没有合并过</span><br><span class="line">                count = parameter.clusterPara.clusterTarget(updateClusterIdx).count; %获取已经存在聚类的出现次数</span><br><span class="line">                parameter.clusterPara.clusterTarget(updateClusterIdx) = ...</span><br><span class="line">                    parameter.clusterPara.newClusterTarget(newClusterIdx); %聚类信息赋值</span><br><span class="line">                parameter.clusterPara.clusterTarget(updateClusterIdx).count = ...</span><br><span class="line">                    count + 1; %标记出现次数增加</span><br><span class="line">                parameter.clusterPara.newClusterTarget(updateClusterIdx).isMerge = 1; %表明新建的聚和以前存在的聚类合并</span><br><span class="line">            end</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">    parameter.clusterPara.clusterCurrNums = parameter.clusterPara.newClusterCurrNums; %聚类数目更新 TODO</span><br><span class="line">    % 合并标志重新赋值为0</span><br><span class="line">    for newClusterIdx = 1:1:parameter.clusterPara.newClusterCurrNums</span><br><span class="line">        parameter.clusterPara.newClusterTarget(newClusterIdx).isMerge = 0;</span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h2 id="calclustermsg-m文件">calClusterMsg.m文件</h2>
<p>calClusterMsg.m文件计算聚类结果的信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br><span class="line">%%计算聚类相关信息</span><br><span class="line">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br><span class="line">function parameter = calClusterMsg(parameter,pointList,pointNums,clusterNums)</span><br><span class="line"></span><br><span class="line">    for clusterIdx = 1:1:clusterNums</span><br><span class="line">       %% 初始信息初始化</span><br><span class="line">        pointLa = 0; %点云纵距和</span><br><span class="line">        pointLo = 0; %点云横距和</span><br><span class="line">        pointVLa = 0; %点云纵向速度和</span><br><span class="line">        pointVLo = 0; %点云横向速度和</span><br><span class="line">        pointCount = 0; %点云总数</span><br><span class="line">       %% 统计当前聚类所有点云的点云数、横距、纵距、纵向速度、横向速度的和</span><br><span class="line">        for pointIdx = 1:1:pointNums </span><br><span class="line">            if pointList(pointIdx).clusterId == clusterIdx</span><br><span class="line">                pointCount = pointCount + 1;</span><br><span class="line">                pointLa = pointLa + pointList(pointIdx).la;</span><br><span class="line">                pointLo = pointLo + pointList(pointIdx).lo;</span><br><span class="line">                pointVLa = pointVLa + pointList(pointIdx).V_La;</span><br><span class="line">                pointVLo = pointVLo + pointList(pointIdx).V_Lo;</span><br><span class="line">            end</span><br><span class="line">        end</span><br><span class="line">       %% 信息赋值</span><br><span class="line">        parameter.clusterPara.newClusterTarget(clusterIdx).pointNums = pointCount; %点云数赋值</span><br><span class="line">        parameter.clusterPara.newClusterTarget(clusterIdx).count = 1; %聚类计数值每次都初始化为1</span><br><span class="line">        parameter.clusterPara.newClusterTarget(clusterIdx).V_La = pointVLa / pointCount; %纵向速度平均</span><br><span class="line">        parameter.clusterPara.newClusterTarget(clusterIdx).V_Lo = pointVLo / pointCount; %横向速度平均</span><br><span class="line">        </span><br><span class="line">        parameter.clusterPara.newClusterTarget(clusterIdx).la = pointLa / pointCount; %纵距平均</span><br><span class="line">        parameter.clusterPara.newClusterTarget(clusterIdx).lo = pointLo / pointCount; %横距平均</span><br><span class="line">       %% 聚类四个角度赋值</span><br><span class="line">        parameter.clusterPara.newClusterTarget(clusterIdx).leftUPCornerLa = ...</span><br><span class="line">            parameter.clusterPara.newClusterTarget(clusterIdx).la + 1.5;</span><br><span class="line">        parameter.clusterPara.newClusterTarget(clusterIdx).leftUPCornerLo = ...</span><br><span class="line">            parameter.clusterPara.newClusterTarget(clusterIdx).lo - 1.5;</span><br><span class="line">        </span><br><span class="line">        parameter.clusterPara.newClusterTarget(clusterIdx).rightUPCornerLa = ...</span><br><span class="line">            parameter.clusterPara.newClusterTarget(clusterIdx).la + 1.5;</span><br><span class="line">        parameter.clusterPara.newClusterTarget(clusterIdx).rightUPCornerLo = ...</span><br><span class="line">            parameter.clusterPara.newClusterTarget(clusterIdx).lo + 1.5;</span><br><span class="line">        </span><br><span class="line">        parameter.clusterPara.newClusterTarget(clusterIdx).leftDownCornerLa = ...</span><br><span class="line">            parameter.clusterPara.newClusterTarget(clusterIdx).la - 1.5;</span><br><span class="line">        parameter.clusterPara.newClusterTarget(clusterIdx).leftDownCornerLo = ...</span><br><span class="line">            parameter.clusterPara.newClusterTarget(clusterIdx).lo - 1.5;</span><br><span class="line"></span><br><span class="line">        parameter.clusterPara.newClusterTarget(clusterIdx).rightDownCornerLa = ...</span><br><span class="line">            parameter.clusterPara.newClusterTarget(clusterIdx).la - 1.5;</span><br><span class="line">        parameter.clusterPara.newClusterTarget(clusterIdx).rightDownCornerLo = ...</span><br><span class="line">            parameter.clusterPara.newClusterTarget(clusterIdx).lo + 1.5;</span><br><span class="line">       %% 赋值给newClusterCurrNums</span><br><span class="line">        parameter.clusterPara.newClusterCurrNums = clusterNums;</span><br><span class="line"></span><br><span class="line">    end</span><br><span class="line">    </span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h2 id="运行结果如下：">运行结果如下：</h2>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(7)/3.png" class="" title="放置图片">
<p><strong>至此，本片文章就此结束了。</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xxiaojie.github.io/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(6)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xiaojie.png">
      <meta itemprop="name" content="xiaojie">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaojie雷达说">
      <meta itemprop="description" content="分享雷达知识">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | xiaojie雷达说">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(6)/" class="post-title-link" itemprop="url">DDMA signal&data Process(6)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-04-20 14:55:14 / 修改时间：15:29:26" itemprop="dateCreated datePublished" datetime="2025-04-20T14:55:14+08:00">2025-04-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/" itemprop="url" rel="index"><span itemprop="name">radar</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/DDMA-radar/" itemprop="url" rel="index"><span itemprop="name">DDMA radar</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>5.3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>5 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Hello，大家好，我是Xiaojie，好久不见，欢迎大家能够和Xiaojie一起学习毫米波雷达知识，Xiaojie准备连载一个系列的文章—DDMA信号处理以及数据处理的流程，本系列文章将从目标生成、信号仿真、测距、测速、cfar检测、测角、目标聚类、目标跟踪这几个模块逐步介绍，这个系列的文章大约是一个7-8篇左右。</p>
<p>最终效果如下：</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(6)/1.gif" class="" title="放置图片">
<p>整体文件的目录树如下：</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(6)/2.png" class="" title="放置图片">
<p>本篇文章主要讲的是doa估计部分，主要提供了三种估计角度的方法：dbf，fft，capon。</p>
<h1>基础知识</h1>
<h2 id="dbf角度估计">dbf角度估计</h2>
<p>关于dbf的介绍已经在这篇文章中进行介绍过了，<a target="_blank" rel="noopener" href="https://xxxxiaojie.blog.csdn.net/article/details/120680191">Xiaoije雷达之路—介绍DBF测角方法及TI的实现方法</a>，各位读者可以自己查阅。</p>
<h2 id="fft角度估计">fft角度估计</h2>
<p>fft测角从原理上讲，可以理解为dbf测角的一个特例。</p>
<h2 id="capon角度估计">capon角度估计</h2>
<p>capon算法是在dbf上的基础上增加了最小方差准则。</p>
<p>在已知期待信号的来波方向和参考信号的条件下，最小方差准则是通过最小化阵列输出的噪声方差来取得对信号<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mi>s</mi></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">X_s(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mclose">)</span></span></span></span>的较好增益，经过加权后的波束形成器的输出为</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>W</mi><mi>H</mi></msup><mi>X</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>W</mi><mi>H</mi></msup><msub><mi>X</mi><mi>s</mi></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>+</mo><msup><mi>W</mi><mi>H</mi></msup><msub><mi>X</mi><mi>n</mi></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">y(t)=W^HX(t)=W^HX_s(t)+W^HX_n(t)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mclose">)</span></span></span></span></span></p>
<p>输出功率可以表示为：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mrow><mi>o</mi><mi>u</mi><mi>t</mi></mrow></msub><mo>=</mo><mi>E</mi><mo stretchy="false">[</mo><mi mathvariant="normal">∣</mi><mi>y</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><msup><mi mathvariant="normal">∣</mi><mn>2</mn></msup><mo stretchy="false">]</mo><mo>=</mo><mi>E</mi><mo stretchy="false">[</mo><mo stretchy="false">(</mo><msup><mi>W</mi><mi>H</mi></msup><mi>X</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msup><mi>W</mi><mi>H</mi></msup><mi>X</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><msup><mo stretchy="false">)</mo><mi>H</mi></msup><mo stretchy="false">]</mo><mo>=</mo><msup><mi>W</mi><mi>H</mi></msup><msub><mi>R</mi><mi>X</mi></msub><mi>W</mi></mrow><annotation encoding="application/x-tex">P_{out}=E[|y(t)|^2]=E[(W^HX(t))(W^HX(t))^H]=W^HR_XW
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">o</span><span class="mord mathdefault mtight">u</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mopen">[</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mopen">[</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span></span></span></span></span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.0413309999999998em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span></span></span></span></span></p>
<p>为了保证波束形成对信号X_s(t)的增益，必须对波束形成器的权向量加以限制，使其在信号<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mi>s</mi></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">X_s(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mclose">)</span></span></span></span>方向上产生一定的增益，约束方法为保证滤波器对期望信号的响应为常数，即</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>W</mi><mi>H</mi></msup><mi>a</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo><mo>=</mo><mi>g</mi></mrow><annotation encoding="application/x-tex">W^Ha(\theta)=g
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span></span></span></span></span><span class="mord mathdefault">a</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span></span></p>
<p>式中，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a(\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span></span>为期望信号的导向矢量，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi></mrow><annotation encoding="application/x-tex">g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span>是一个复增益，通常为1。</p>
<p>采用拉格朗日乘子法，得到最优权向量为</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>o</mi><mi>p</mi><mi>t</mi></mrow></msub><mo>=</mo><mfrac><mrow><mi>g</mi><msubsup><mi>R</mi><mi>n</mi><mrow><mo>−</mo><mn>1</mn></mrow></msubsup><mi>a</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow><mrow><msup><mi>a</mi><mi>H</mi></msup><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo><msubsup><mi>R</mi><mi>n</mi><mrow><mo>−</mo><mn>1</mn></mrow></msubsup><mi>a</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">W_{opt}=\frac{gR_n^{-1}a(\theta)}{a^H(\theta)R_n^{-1}a(\theta)}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.28055599999999997em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">o</span><span class="mord mathdefault mtight">p</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.427108em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.767331em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.4530000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord mathdefault">a</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord mathdefault">a</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>则得到capon的空间谱为</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mrow><mi>o</mi><mi>u</mi><mi>t</mi></mrow></msub><mo>=</mo><mfrac><mi>g</mi><mrow><msup><mi>a</mi><mi>H</mi></msup><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo><msubsup><mi>R</mi><mi>n</mi><mrow><mo>−</mo><mn>1</mn></mrow></msubsup><mi>a</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">P_{out} = \frac{g}{a^H(\theta)R_n^{-1}a(\theta)}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">o</span><span class="mord mathdefault mtight">u</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.04356em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1075599999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.767331em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.4530000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord mathdefault">a</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<h1>代码仿真</h1>
<h2 id="generateparameter-m文件更新">generateParameter.m文件更新</h2>
<p>对generateParameter.m文件进行更新，具体代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">% 参数设置</span><br><span class="line">function parameter = generateParameter()</span><br><span class="line"></span><br><span class="line">    parameter.frameNumLoops = 18; %初始化frame循环</span><br><span class="line">    parameter.frameCount = 0; %帧计数</span><br><span class="line">    parameter.targetNums = 1; %初始化真实目标</span><br><span class="line">    </span><br><span class="line">    parameter.c = 3e8; %光速</span><br><span class="line">    parameter.frameNums = 70; %帧数</span><br><span class="line">    parameter.frameTime = 60e-3; %帧周期</span><br><span class="line">    parameter.startFreq = 76.2e9;  %起始频率</span><br><span class="line">    parameter.Fs = 18.75e6; %采样率 实采样率37.5MHz的采样率  复采样率为18.75MHz的采样率</span><br><span class="line">    parameter.tr = 1 / parameter.Fs; %采样间隔</span><br><span class="line">    parameter.Slope = 20e12; %chirp斜率</span><br><span class="line">    parameter.Samples = 512;  %采样点</span><br><span class="line">    parameter.rangeBin = 512; %rangebin</span><br><span class="line">    parameter.Chirps = 384;  %chirp数</span><br><span class="line">    parameter.dopplerBin = 384; %dopplerbin</span><br><span class="line">    parameter.dopplerBinHalf = parameter.dopplerBin / 2; %多普勒bin的一半</span><br><span class="line">    parameter.TrValid = parameter.Samples / parameter.Fs; %采样有效时间</span><br><span class="line">    parameter.TrTotal = 38e-6;  %chirp周期</span><br><span class="line">    parameter.t = 0:parameter.tr:parameter.TrValid - parameter.tr; %chirp时间下标</span><br><span class="line">    parameter.validBandWidth = parameter.Slope * parameter.TrValid; %有效带宽</span><br><span class="line">    parameter.totalBandWidth = parameter.Slope * parameter.TrTotal; %总带宽</span><br><span class="line">    parameter.centerFreq = parameter.startFreq + parameter.validBandWidth / 2; %中心频率</span><br><span class="line">    parameter.lambda = parameter.c / parameter.centerFreq; %波长</span><br><span class="line">    </span><br><span class="line">    parameter.rangeRes = parameter.c / (2 * parameter.validBandWidth); %距离分辨率</span><br><span class="line">    parameter.rangeMax = parameter.rangeRes * parameter.rangeBin; %最大作用距离</span><br><span class="line">    parameter.rangeIdx = (0:1:parameter.Samples-1); %range索引</span><br><span class="line">    parameter.range = parameter.rangeIdx * parameter.rangeRes; %距离下标</span><br><span class="line">    parameter.dopplerRes = parameter.lambda / (2 * parameter.dopplerBin * parameter.TrTotal); %速度分辨率</span><br><span class="line">    parameter.dopplerMax = parameter.dopplerRes * parameter.dopplerBin; %最大探测速度，不考虑负速度</span><br><span class="line">    parameter.dopplerHalfMax = parameter.dopplerMax / 2; %最大探测速度，考虑正负速度</span><br><span class="line">    parameter.dopplerIdx = (0:1:parameter.dopplerBin-1); %dopplerIdx</span><br><span class="line">    parameter.doppler = (parameter.dopplerIdx - parameter.dopplerBinHalf) * parameter.dopplerRes; %速度下标</span><br><span class="line">    </span><br><span class="line">    parameter.txAntenna = [0 4 8 12]; %发射天线 暂不考俯仰 2944的方位发射天线</span><br><span class="line">    parameter.rxAntenna = [0 1 2 3]; %接收天线 2944的方位接收天线</span><br><span class="line">    parameter.txNum = length(parameter.txAntenna); %发射天线的数量</span><br><span class="line">    parameter.rxNum = length(parameter.rxAntenna); %接收天线的数量</span><br><span class="line">    parameter.virtualAntenna = sort([parameter.rxAntenna + parameter.txAntenna(1), ...</span><br><span class="line">        parameter.rxAntenna + parameter.txAntenna(2), ...</span><br><span class="line">        parameter.rxAntenna + parameter.txAntenna(3), ...</span><br><span class="line">        parameter.rxAntenna + parameter.txAntenna(4)]); %虚拟的阵元相对位置</span><br><span class="line">    parameter.aperture = parameter.virtualAntenna(end) - parameter.virtualAntenna(1); %天线孔径大小</span><br><span class="line">    parameter.virtualAntennaNums = parameter.txNum * parameter.rxNum; %虚拟天线的数量</span><br><span class="line">    parameter.dx = parameter.lambda / 2; %虚拟天线的方位最小间距</span><br><span class="line">    parameter.thetaFOV = asind(parameter.lambda / (2 * parameter.dx)); %方位向FOV</span><br><span class="line">    parameter.thetaRes = asind(2 / parameter.aperture); %方位角分辨率</span><br><span class="line">    parameter.angleIdx = asin((-128:1:128-1)/128) * 180 / pi; %方位角下标</span><br><span class="line">    parameter.doaMethod = 1; %测角方法选择 1-dbf 2-fft 3-capon</span><br><span class="line">    parameter.k = 2 * pi / parameter.lambda; %波数</span><br><span class="line">    parameter.weightVec = exp(-1i*parameter.k * parameter.dx .* parameter.virtualAntenna.&#x27; * sind(parameter.angleIdx)); %权系数</span><br><span class="line">    </span><br><span class="line">    parameter.subBand = 6; %子带数</span><br><span class="line">    parameter.emptyBand = 2; %空子带数</span><br><span class="line">    parameter.validBand = parameter.txNum; %有效子带为发射天线数量</span><br><span class="line">    parameter.subDopplerBin = parameter.dopplerBin / parameter.subBand; %一个子带dopplerbin的数目</span><br><span class="line">    parameter.subBandRelation = [0, 1, 2, 3] * parameter.subDopplerBin; %子带间的关系</span><br><span class="line">    parameter.phaseShift = mod(2*pi .* (1:1:parameter.Chirps).&#x27; .* (0:1:parameter.txNum-1) ./ parameter.subBand, 2*pi); %chirp信号的相移值</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h2 id="gettargetangle-m文件">getTargetAngle.m文件</h2>
<p>getTargetAngle.m文件主要对cfar检测到的目标进行角度求解，提供了三种解角的方法：dbf、fft、capon</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">function [angle] = getTargetAngle(parameter,antVec)</span><br><span class="line">    </span><br><span class="line">    doaMethod = parameter.doaMethod; %doa解角方法</span><br><span class="line">    if doaMethod == 1 %dbf</span><br><span class="line">        angle = dbfMethod(parameter,antVec);</span><br><span class="line">    elseif doaMethod == 2 %fft</span><br><span class="line">        angle = fftMethod(parameter,antVec);</span><br><span class="line">    elseif doaMethod == 3 %capon</span><br><span class="line">        angle = caponMethod(parameter,antVec);</span><br><span class="line">    else</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">function [angle] = dbfMethod(parameter,antVec)</span><br><span class="line"></span><br><span class="line">    doa_dbf = antVec * conj(parameter.weightVec) ;</span><br><span class="line">    doa_abs = abs(doa_dbf);</span><br><span class="line">    [~,maxIdx]=max(doa_abs);</span><br><span class="line">    angle = parameter.angleIdx(maxIdx);</span><br><span class="line"></span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">function [angle] = fftMethod(parameter,antVec)</span><br><span class="line">    doa_abs=abs(fftshift(fft(antVec,256)));</span><br><span class="line">    [~,maxIdx]=max(doa_abs);</span><br><span class="line">    angle = parameter.angleIdx(maxIdx);</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">function [angle] = caponMethod(parameter,antVec)</span><br><span class="line">    R_Hat = antVec.&#x27; * conj(antVec);</span><br><span class="line">    R_HatInv = inv(R_Hat);</span><br><span class="line">    for i = 1:1:length(parameter.angleIdx)</span><br><span class="line">        doa_capon(i) = 1 / ((parameter.weightVec(:,i).&#x27;) * R_HatInv * conj(parameter.weightVec(:,i)));</span><br><span class="line">    end</span><br><span class="line">    doa_abs = abs(doa_capon);</span><br><span class="line">    [~,maxIdx]=max(doa_abs);</span><br><span class="line">    angle = parameter.angleIdx(maxIdx);</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p><strong>至此，本片文章就此结束了，这篇文章结束就意味者信号处理的部分结束了。</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xxiaojie.github.io/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(5)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xiaojie.png">
      <meta itemprop="name" content="xiaojie">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaojie雷达说">
      <meta itemprop="description" content="分享雷达知识">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | xiaojie雷达说">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(5)/" class="post-title-link" itemprop="url">DDMA signal&data Process(5)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-04-20 14:51:14 / 修改时间：15:29:28" itemprop="dateCreated datePublished" datetime="2025-04-20T14:51:14+08:00">2025-04-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/" itemprop="url" rel="index"><span itemprop="name">radar</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/DDMA-radar/" itemprop="url" rel="index"><span itemprop="name">DDMA radar</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>5.6k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>5 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Hello，大家好，我是Xiaojie，好久不见，欢迎大家能够和Xiaojie一起学习毫米波雷达知识，Xiaojie准备连载一个系列的文章—DDMA信号处理以及数据处理的流程，本系列文章将从目标生成、信号仿真、测距、测速、cfar检测、测角、目标聚类、目标跟踪这几个模块逐步介绍，这个系列的文章大约是一个7-8篇左右。</p>
<p>最终效果如下：</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(5)/1.gif" class="" title="放置图片">
<p>整体文件的目录树如下：</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(5)/2.png" class="" title="放置图片">
<p>本篇文章主要讲的是cfar检测部分。</p>
<p>cfar检测是雷达信号处理中最重要的部分，在CFAR检测中，雷达检测目标所面临的两大问题：虚警、漏报</p>
<p>主要原因是：</p>
<ol>
<li>
<p>雷达在检测目标时受到强杂波和干扰的影响；</p>
</li>
<li>
<p>接收目标信号时，还会接收噪声、杂波和干扰信号，这些信号具有随机性，信号的强度时刻发生变化</p>
</li>
</ol>
<p>雷达如何根据杂波、噪声等背景信号自适应调整判决门限以保证雷达具有恒定的虚警概率是雷达CFAR检测的关键。</p>
<p>恒虚警率就是保证虚警概率不变。虚警概率可以用如下式子表示</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>F</mi></msub><mo>=</mo><msubsup><mo>∫</mo><mi>γ</mi><mi mathvariant="normal">∞</mi></msubsup><mi>p</mi><mo stretchy="false">(</mo><mi>T</mi><mi mathvariant="normal">∣</mi><msub><mi>H</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mi>d</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">P_F = \int _{\gamma}^{\infty}p(T|H_0)dT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.35122em;vertical-align:-0.49192800000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8592920000000002em;"><span style="top:-2.34418em;margin-left:-0.19445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05556em;">γ</span></span></span></span><span style="top:-3.2579000000000002em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.49192800000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span></span></span></span></p>
<p>积分下限是判决门限，T是检验统计量，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">H_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>是无信号的假设：二元假设:<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">H_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>:无信号；<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">H_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>:有信号，一般是设定虚警概率，可以解出判决门限，通过判决门限计算检测概率：检测概率的积分区间跟虚警概率的积分区间是一样的，只是基于的假设不同。</p>
<h1>CFAR检测器的类型</h1>
<ul>
<li>
<p>固定门限检测器</p>
<p>这种情况下噪声幅度服从瑞利分布，上述积分里的概率密度精确已知，确定了门限那么积分值就定了</p>
</li>
<li>
<p>自适应门限检测器</p>
<pre><code>单元平均CFAR：CA-CFAR
选小CFAR检测器：SO-CFAR
选大CFAR检测器：GO-CFAR
有序CFAR检测器：OS-CFAR
</code></pre>
<p>不同距离段的杂波平均功率是不同的，为了保证虚警概率恒定，需要估计杂波平均功率，然后根据杂波平均功率设置检测门限</p>
<pre><code>1. 估计杂波平均功率：利用相邻单元的杂波平均功率近似相等这一条件，通过邻近距离单元回波功率来估计待检测距离单元杂波平均功率。
2. 将估计的杂波平均功率乘以一个系数作为检测门限
</code></pre>
</li>
</ul>
<h2 id="ca-cfar">CA-CFAR</h2>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(5)/3.png" class="" title="放置图片">
<h2 id="so-cfar">SO-CFAR</h2>
<p>当参考距离单元内存在一个强干扰目标时，CA-CFAR检测门限会提高，导致信号较弱的目标难以检测。</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(5)/4.png" class="" title="放置图片">
<p>关于上图的解释：左图某个距离单元处的门限计算是以该距离单元为中心左侧跟右侧是参考单元，在作图重由于弱目标的参考单元中包含了强的目标，使得在弱目标处的门限计算偏大，造成漏检；右图使用的SO-CFAR</p>
<p>解决方法：将左右参考距离单元的杂波平均功率单独计算，并取其中较小的估计值作为待检测距离单元杂波功率来计算检测门限以避免弱目标被漏检</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(5)/5.png" class="" title="放置图片">
<p>适用场景：参考距离单元某一侧邻近距离单元存在强目标</p>
<h2 id="go-cfar">GO-CFAR</h2>
<p>当杂波严重不均匀时，采用CA-CFAR检测杂波边缘会产生虚警</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(5)/6.png" class="" title="放置图片">
<p>关于上图的解释：左图表示某些距离单元处杂波幅度值比较大，超过了门限，导致了虚警；右图使用的是GO_CFAR</p>
<p>解决方法：将左右参考单元的杂波平均功率单独计算，并取其中较大的估计值作为待检测距离单元</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(5)/7.png" class="" title="放置图片">
<p>适用场景：非均匀杂波</p>
<h2 id="os-cfar">OS-CFAR</h2>
<p>当参考单元内存在&quot;多个强干扰目标时&quot;，多个目标的存在会导致估计的杂波平均功率过高，从而抬高检测门限、导致漏警。</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(5)/8.png" class="" title="放置图片">
<p>关于上图的解释：左图使用的是SO_CFAR；右图使用的是OS_CFAR</p>
<p>解决方法：将各参考单元回波功率进行排序，选取中间某个值作为待检测距离单元杂波平均功率来计算门限</p>
<p>接收信号</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(5)/9.png" class="" title="放置图片">
<p>使用场景：存在多个强干扰目标的场景</p>
<h1>本文cfar检测</h1>
<p>本文cfar检测使用固定的阈值，当目标的能量大于阈值为则将目标检测出来。同时由于仿真原始信号为DDMA体制的雷达，发射信号存在移相，且相移为60deg，因此在做完快慢时间傅里叶变换会形成6个子带，其中4个为有效子带，2个为空子带。</p>
<p>在检测过程中，在6个子带中，有4个子带大于阈值，且其余两个子带小于阈值，则判断为有效目标，否则为无效目标；在判断为有效目标的情况下，需要解速度模糊</p>
<h2 id="基于empty-band的ddma解调">基于Empty-band的DDMA解调</h2>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(5)/10.png" class="" title="放置图片">
<h2 id="代码仿真">代码仿真</h2>
<h3 id="cfar-m文件">cfar.m文件</h3>
<p>cfar.m文件主要对非相干积累后的RD图进行目标检测，返回值为检测到的目标的点云</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">function [pointList] = cfar(parameter,detectionMatrix)</span><br><span class="line"></span><br><span class="line">    globalNoise = getGlobalNoise(parameter,detectionMatrix); %全局底噪</span><br><span class="line">    dopplerNoise = getDopplerNoise(detectionMatrix); %doppler维度底噪</span><br><span class="line">    pointIndex = 1;</span><br><span class="line">    for rangeIdx = 1:1:parameter.rangeBin %循环所有rangebin</span><br><span class="line">        </span><br><span class="line">        currentRangeRegionThresh = parameter.cfarRangeRegionThresh(ceil(rangeIdx / parameter.cfarEachRegionRangeBinNums)); %当前距离单元的cfar阈值</span><br><span class="line">        currentDopplerNoise = dopplerNoise(rangeIdx); %获取当前range index的doppler维度噪声</span><br><span class="line">        currentRangeThresh = currentDopplerNoise + currentRangeRegionThresh; %当前range index总阈值</span><br><span class="line">        </span><br><span class="line">        for dopplerIdx = 1:1:parameter.subDopplerBin %循环一半dopplerBin</span><br><span class="line"></span><br><span class="line">            for subBandIdx = 1:1:parameter.subBand %循环6个子带</span><br><span class="line"></span><br><span class="line">                dopplerIdx1 = mod(dopplerIdx + parameter.subBandRelation(1) + parameter.subDopplerBin * (subBandIdx - 1), parameter.dopplerBin) + 1; %dopplerIdx1</span><br><span class="line">                dopplerIdx2 = mod(dopplerIdx + parameter.subBandRelation(2) + parameter.subDopplerBin * (subBandIdx - 1), parameter.dopplerBin) + 1; %dopplerIdx2</span><br><span class="line">                dopplerIdx3 = mod(dopplerIdx + parameter.subBandRelation(3) + parameter.subDopplerBin * (subBandIdx - 1), parameter.dopplerBin) + 1; %dopplerIdx3</span><br><span class="line">                dopplerIdx4 = mod(dopplerIdx + parameter.subBandRelation(4) + parameter.subDopplerBin * (subBandIdx - 1), parameter.dopplerBin) + 1; %dopplerIdx4</span><br><span class="line"></span><br><span class="line">                currentCellPower1 = detectionMatrix(dopplerIdx1,rangeIdx);%dopplerIdx1对应的power</span><br><span class="line">                currentCellPower2 = detectionMatrix(dopplerIdx2,rangeIdx);%dopplerIdx2对应的power</span><br><span class="line">                currentCellPower3 = detectionMatrix(dopplerIdx3,rangeIdx);%dopplerIdx3对应的power</span><br><span class="line">                currentCellPower4 = detectionMatrix(dopplerIdx4,rangeIdx);%dopplerIdx4对应的power</span><br><span class="line">                currentCellPower = [currentCellPower1,currentCellPower2,currentCellPower3,currentCellPower4]; %4个点的能量</span><br><span class="line">                maxPowerCurrentCell = max(currentCellPower); %4个点中最大的能量值</span><br><span class="line">                minPowerCurrentCell = min(currentCellPower); %4个点中最小的能量值</span><br><span class="line">                if (currentCellPower1 &gt; currentRangeThresh &amp;&amp; currentCellPower2 &gt; currentRangeThresh &amp;&amp; currentCellPower3 &gt; currentRangeThresh &amp;&amp; currentCellPower4 &gt; currentRangeThresh &amp;&amp; ...</span><br><span class="line">                        (maxPowerCurrentCell - minPowerCurrentCell) &lt; parameter.cfarChannelUnbalancedThresh) %条件判决, 进入判决的条件内的为目标点</span><br><span class="line">                    </span><br><span class="line">                    pointList(pointIndex).rangeIdx = rangeIdx; %rangeIdx赋值</span><br><span class="line"></span><br><span class="line">                    </span><br><span class="line">                    pointList(pointIndex).dopplerIdx = dopplerIdx1; %dopplerIdx赋值</span><br><span class="line">                    if dopplerIdx1 &gt; parameter.dopplerBinHalf %dopplerIdx1大于dopplerBinHalf</span><br><span class="line">                        pointList(pointIndex).dopplerShiftIdx = dopplerIdx1 - parameter.dopplerBin; %dopplerShiftIdx赋值</span><br><span class="line">                    else</span><br><span class="line">                        pointList(pointIndex).dopplerShiftIdx = dopplerIdx1; %dopplerIdx赋值</span><br><span class="line">                    end</span><br><span class="line">                    </span><br><span class="line">                    % 普通DDM range和doppler赋值</span><br><span class="line">                    %pointList(pointIndex).range = rangeIdx * parameter.rangeRes; %普通range赋值</span><br><span class="line">                    %pointList(pointIndex).speed = pointList(pointIndex).dopplerShiftIdx * parameter.dopplerRes; %doppler赋值</span><br><span class="line">                    pointList(pointIndex).range = range; %range赋值</span><br><span class="line">                    pointList(pointIndex).speed = speed;</span><br><span class="line">                    pointList(pointIndex).power = maxPowerCurrentCell; %功率赋值</span><br><span class="line">                    pointList(pointIndex).snr = maxPowerCurrentCell - globalNoise; %信噪比赋值</span><br><span class="line">                    pointList(pointIndex).txOrder = subBandIdx; %天线顺序</span><br><span class="line">                    pointList(pointIndex).conf1 = 0; %置信度1赋值</span><br><span class="line">                    pointList(pointIndex).conf2 = 0; %置信度2赋值</span><br><span class="line">                    pointList(pointIndex).quality = 0; %点云质量赋值</span><br><span class="line">                    pointIndex = pointIndex + 1;</span><br><span class="line">                end</span><br><span class="line">                </span><br><span class="line">            end</span><br><span class="line">            </span><br><span class="line">        end</span><br><span class="line">        </span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">end</span><br><span class="line">%%</span><br><span class="line">% 获取全局底噪</span><br><span class="line">function noise = getGlobalNoise(parameter,detectionMatrix)</span><br><span class="line"></span><br><span class="line">    rangeIdx = parameter.cfarGlobalNoiseRangeIdx;</span><br><span class="line">    dopplerIdx = parameter.cfarGlobalNoiseDopplerIdx;</span><br><span class="line">    rangeLen = parameter.cfarGlobalNoiseRangeLen;</span><br><span class="line">    dopplerLen = parameter.cfarGlobalNoiseDopplerLen;</span><br><span class="line">    region1Noise = mean(mean(detectionMatrix(dopplerIdx - dopplerLen:dopplerIdx,rangeIdx - rangeLen:rangeIdx)));</span><br><span class="line">    region2Noise = mean(mean(detectionMatrix(dopplerIdx:dopplerIdx + dopplerLen,rangeIdx - rangeLen:rangeIdx)));</span><br><span class="line">    region3Noise = mean(mean(detectionMatrix(dopplerIdx - dopplerLen:dopplerIdx,rangeIdx:rangeIdx + rangeLen)));</span><br><span class="line">    region4Noise = mean(mean(detectionMatrix(dopplerIdx:dopplerIdx + dopplerLen,rangeIdx:rangeIdx + rangeLen)));</span><br><span class="line">    noise = min([region1Noise,region2Noise,region3Noise,region4Noise]);</span><br><span class="line">end</span><br><span class="line">%% </span><br><span class="line">% 获取doppler维度底噪</span><br><span class="line">function dopplerNoise = getDopplerNoise(detectionMatrix)</span><br><span class="line"></span><br><span class="line">    dopplerNoise = mean(detectionMatrix,1);</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h1>参考文献</h1>
<ol>
<li>《基于 AWR2944 的汽车雷达 DDMA 波形的原理和实现》</li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42686221/article/details/124915956?spm=1001.2014.3001.5501">【统计信号处理检测理论：CFAR检测】</a></li>
</ol>
<p><strong>至此，本片文章就此结束了。</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xxiaojie.github.io/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(4)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xiaojie.png">
      <meta itemprop="name" content="xiaojie">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaojie雷达说">
      <meta itemprop="description" content="分享雷达知识">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | xiaojie雷达说">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(4)/" class="post-title-link" itemprop="url">DDMA signal&data Process(4)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-04-20 14:50:14 / 修改时间：14:50:13" itemprop="dateCreated datePublished" datetime="2025-04-20T14:50:14+08:00">2025-04-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/" itemprop="url" rel="index"><span itemprop="name">radar</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/DDMA-radar/" itemprop="url" rel="index"><span itemprop="name">DDMA radar</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Hello，大家好，我是Xiaojie，好久不见，欢迎大家能够和Xiaojie一起学习毫米波雷达知识，Xiaojie准备连载一个系列的文章—DDMA信号处理以及数据处理的流程，本系列文章将从目标生成、信号仿真、测距、测速、cfar检测、测角、目标聚类、目标跟踪这几个模块逐步介绍，这个系列的文章大约是一个7-8篇左右。</p>
<p>最终效果如下：</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(4)/1.gif" class="" title="放置图片">
<p>整体文件的目录树如下：</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(4)/2.png" class="" title="放置图片">
<p>本篇文章主要讲的是目标的距离速度测量部分。</p>
<h1>基础知识</h1>
<h2 id="距离测量">距离测量</h2>
<p>目标距离对应的时延：$$\tau = \frac{2R}{c}$$</p>
<p>目标时延对应的频率：$$f = S * \tau = \frac{S*2R}{c}$$</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mrow><mi>b</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">f_{bin}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">b</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>对应频率：$$f_{bin}=\frac{(range_{index}-1)*f_s}{rangeBin}$$</p>
<p>目标的距离为：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>=</mo><mfrac><mrow><msub><mi>f</mi><mrow><mi>b</mi><mi>i</mi><mi>n</mi></mrow></msub><mo>∗</mo><mi>c</mi></mrow><mrow><mn>2</mn><mo>∗</mo><mi>S</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mi>r</mi><mi>a</mi><mi>n</mi><mi>g</mi><msub><mi>e</mi><mrow><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi></mrow></msub><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>∗</mo><msub><mi>f</mi><mi>s</mi></msub><mo>∗</mo><mi>c</mi></mrow><mrow><mi>r</mi><mi>a</mi><mi>n</mi><mi>g</mi><mi>e</mi><mi>B</mi><mi>i</mi><mi>n</mi><mo>∗</mo><mn>2</mn><mo>∗</mo><mi>S</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mi>r</mi><mi>a</mi><mi>n</mi><mi>g</mi><msub><mi>e</mi><mrow><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi></mrow></msub><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mi>c</mi></mrow><mrow><mn>2</mn><mi>B</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">R = \frac{f_{bin}*c}{2*S}=\frac{(range_{index}-1)*f_s*c}{rangeBin*2*S}=\frac{(range_{index}-1)c}{2B}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.0574399999999997em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714399999999998em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">b</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.30744em;vertical-align:-0.8804400000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord mathdefault">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<h2 id="速度测量">速度测量</h2>
<p>目标速度对应的多普勒频移：$$f_d = \frac{2v}{\lambda}$$</p>
<p>慢时间维度采样率频率：$$f_s = \frac{1}{T_r}$$<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>r</mi></msub><mtext>为脉冲重复周期</mtext></mrow><annotation encoding="application/x-tex">T_r为脉冲重复周期</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">为</span><span class="mord cjk_fallback">脉</span><span class="mord cjk_fallback">冲</span><span class="mord cjk_fallback">重</span><span class="mord cjk_fallback">复</span><span class="mord cjk_fallback">周</span><span class="mord cjk_fallback">期</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mrow><mi>b</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">f_{bin}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">b</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>对应的频率为：$$f_{bin}=\frac{(doppler_{index}-1)*f_s}{dopplerBin}$$</p>
<p>目标的速度为：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo>=</mo><mfrac><mrow><msub><mi>f</mi><mi>d</mi></msub><mi>λ</mi></mrow><mn>2</mn></mfrac><mo>=</mo><mfrac><mrow><mi>λ</mi><mo stretchy="false">(</mo><mi>d</mi><mi>o</mi><mi>p</mi><mi>p</mi><mi>l</mi><mi>e</mi><msub><mi>r</mi><mrow><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi></mrow></msub><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mrow><mn>2</mn><mo>∗</mo><mi>d</mi><mi>o</mi><mi>p</mi><mi>p</mi><mi>l</mi><mi>e</mi><mi>r</mi><mi>B</mi><mi>i</mi><mi>n</mi><mo>∗</mo><mi>T</mi><mi>r</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mi>d</mi><mi>o</mi><mi>p</mi><mi>p</mi><mi>l</mi><mi>e</mi><msub><mi>r</mi><mrow><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi></mrow></msub><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>∗</mo><mi>λ</mi></mrow><mrow><mn>2</mn><msub><mi>T</mi><mi>s</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">v = \frac{f_d \lambda}{2}=\frac{\lambda (doppler_{index}-1)}{2*dopplerBin*Tr}=\frac{(doppler_{index}-1)*\lambda}{2T_s}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.0574399999999997em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714399999999998em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.30744em;vertical-align:-0.8804400000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">o</span><span class="mord mathdefault">p</span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">λ</span><span class="mopen">(</span><span class="mord mathdefault">d</span><span class="mord mathdefault">o</span><span class="mord mathdefault">p</span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.263em;vertical-align:-0.8360000000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault">d</span><span class="mord mathdefault">o</span><span class="mord mathdefault">p</span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>s</mi></msub><mtext>为所有</mtext><mi>c</mi><mi>h</mi><mi>i</mi><mi>r</mi><mi>p</mi><mtext>持续时间</mtext></mrow><annotation encoding="application/x-tex">T_s为所有chirp持续时间</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">为</span><span class="mord cjk_fallback">所</span><span class="mord cjk_fallback">有</span><span class="mord mathdefault">c</span><span class="mord mathdefault">h</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">p</span><span class="mord cjk_fallback">持</span><span class="mord cjk_fallback">续</span><span class="mord cjk_fallback">时</span><span class="mord cjk_fallback">间</span></span></span></span></p>
<h2 id="非相干积累">非相干积累</h2>
<p>非相干积累是在不考虑天线之间相位信息的情况下，将所有接收通道进行累加，达到提高信噪比的目的。</p>
<h1>仿真</h1>
<h2 id="generateparameter-m文件更新">generateParameter.m文件更新</h2>
<p>对generateParameter.m文件进行更新，具体代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">% 参数设置</span><br><span class="line">function parameter = generateParameter()</span><br><span class="line"></span><br><span class="line">    parameter.frameNumLoops = 18; %初始化frame循环</span><br><span class="line">    parameter.frameCount = 0; %帧计数</span><br><span class="line">    parameter.targetNums = 1; %初始化真实目标</span><br><span class="line">    </span><br><span class="line">    parameter.c = 3e8; %光速</span><br><span class="line">    parameter.frameNums = 70; %帧数</span><br><span class="line">    parameter.frameTime = 60e-3; %帧周期</span><br><span class="line">    parameter.startFreq = 76.2e9;  %起始频率</span><br><span class="line">    parameter.Fs = 18.75e6; %采样率 实采样率37.5MHz的采样率  复采样率为18.75MHz的采样率</span><br><span class="line">    parameter.tr = 1 / parameter.Fs; %采样间隔</span><br><span class="line">    parameter.Slope = 20e12; %chirp斜率</span><br><span class="line">    parameter.Samples = 512;  %采样点</span><br><span class="line">    parameter.rangeBin = 512; %rangebin</span><br><span class="line">    parameter.Chirps = 384;  %chirp数</span><br><span class="line">    parameter.dopplerBin = 384; %dopplerbin</span><br><span class="line">    parameter.dopplerBinHalf = parameter.dopplerBin / 2; %多普勒bin的一半</span><br><span class="line">    parameter.TrValid = parameter.Samples / parameter.Fs; %采样有效时间</span><br><span class="line">    parameter.TrTotal = 38e-6;  %chirp周期</span><br><span class="line">    parameter.t = 0:parameter.tr:parameter.TrValid - parameter.tr; %chirp时间下标</span><br><span class="line">    parameter.validBandWidth = parameter.Slope * parameter.TrValid; %有效带宽</span><br><span class="line">    parameter.totalBandWidth = parameter.Slope * parameter.TrTotal; %总带宽</span><br><span class="line">    parameter.centerFreq = parameter.startFreq + parameter.validBandWidth / 2; %中心频率</span><br><span class="line">    parameter.lambda = parameter.c / parameter.centerFreq; %波长</span><br><span class="line">    </span><br><span class="line">    parameter.rangeRes = parameter.c / (2 * parameter.validBandWidth); %距离分辨率</span><br><span class="line">    parameter.rangeMax = parameter.rangeRes * parameter.rangeBin; %最大作用距离</span><br><span class="line">    parameter.rangeIdx = (0:1:parameter.Samples-1); %range索引</span><br><span class="line">    parameter.range = parameter.rangeIdx * parameter.rangeRes; %距离下标</span><br><span class="line">    parameter.dopplerRes = parameter.lambda / (2 * parameter.dopplerBin * parameter.TrTotal); %速度分辨率</span><br><span class="line">    parameter.dopplerMax = parameter.dopplerRes * parameter.dopplerBin; %最大探测速度，不考虑负速度</span><br><span class="line">    parameter.dopplerHalfMax = parameter.dopplerMax / 2; %最大探测速度，考虑正负速度</span><br><span class="line">    parameter.dopplerIdx = (0:1:parameter.dopplerBin-1); %dopplerIdx</span><br><span class="line">    parameter.doppler = (parameter.dopplerIdx - parameter.dopplerBinHalf) * parameter.dopplerRes; %速度下标</span><br><span class="line">    </span><br><span class="line">    parameter.txAntenna = [0 4 8 12]; %发射天线 暂不考俯仰 2944的方位发射天线</span><br><span class="line">    parameter.rxAntenna = [0 1 2 3]; %接收天线 2944的方位接收天线</span><br><span class="line">    parameter.txNum = length(parameter.txAntenna); %发射天线的数量</span><br><span class="line">    parameter.rxNum = length(parameter.rxAntenna); %接收天线的数量</span><br><span class="line">    parameter.dx = parameter.lambda / 2; %虚拟天线的方位最小间距</span><br><span class="line"></span><br><span class="line">    parameter.subBand = 6; %子带数</span><br><span class="line">    parameter.emptyBand = 2; %空子带数</span><br><span class="line">    parameter.validBand = parameter.txNum; %有效子带为发射天线数量</span><br><span class="line">    parameter.subDopplerBin = parameter.dopplerBin / parameter.subBand; %一个子带dopplerbin的数目</span><br><span class="line">    parameter.subBandRelation = [0, 1, 2, 3] * parameter.subDopplerBin; %子带间的关系</span><br><span class="line">    parameter.phaseShift = mod(2*pi .* (1:1:parameter.Chirps).&#x27; .* (0:1:parameter.txNum-1) ./ parameter.subBand, 2*pi); %chirp信号的相移值</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h2 id="rdfftmatrix-m文件">RDfftMatrix.m文件</h2>
<p>generateParameter.m文件主要是对生成的原始信号数据进行加窗操作以及在快时间和慢时间维度进行傅里叶变换，将时域信号转换为频域信号，具体代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function fft2dData = RDfftMatrix(rawData)</span><br><span class="line">    rawData = squeeze(rawData); %原始数据</span><br><span class="line">    [dopplerBin,rangeBin] = size(rawData); %原始数据大小</span><br><span class="line">    rangeWin = hanning(rangeBin)&#x27;; %距离维度hanning窗</span><br><span class="line">    rangeWin2D = repmat(rangeWin,dopplerBin,1); %距离窗2D</span><br><span class="line">    dopplerWin = hanning(dopplerBin); %多普勒维度hanning窗</span><br><span class="line">    dopplerWin2D = repmat(dopplerWin,1,rangeBin); %多普勒窗2D</span><br><span class="line">    rawDataWin = rawData .* rangeWin2D; %距离维度加窗</span><br><span class="line">    fft1dData = fft(rawDataWin,rangeBin,2); %距离维度fft</span><br><span class="line">    fft1dDataWin = fft1dData .* dopplerWin2D; %多普勒维度加窗</span><br><span class="line">    fft2dData = fft(fft1dDataWin,dopplerBin,1); %速度维度fft</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h2 id="chan-accumulate-m文件">chan_Accumulate.m文件</h2>
<p>chan_Accumulate.m文件主要是进行所有接收通道信号的累加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function accumulateRD = chan_Accumulate(fft2dData)</span><br><span class="line"></span><br><span class="line">    accumulateRD = db(squeeze(sum(abs(fft2dData),1)));</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h3 id="运行结果如下：">运行结果如下：</h3>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(4)/3.png" class="" title="放置图片">
<p><strong>至此，本片文章就此结束了。</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xxiaojie.github.io/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(3)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xiaojie.png">
      <meta itemprop="name" content="xiaojie">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaojie雷达说">
      <meta itemprop="description" content="分享雷达知识">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | xiaojie雷达说">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(3)/" class="post-title-link" itemprop="url">DDMA signal&data Process(3)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-04-20 14:34:14 / 修改时间：14:39:51" itemprop="dateCreated datePublished" datetime="2025-04-20T14:34:14+08:00">2025-04-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/" itemprop="url" rel="index"><span itemprop="name">radar</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/DDMA-radar/" itemprop="url" rel="index"><span itemprop="name">DDMA radar</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Hello，大家好，我是Xiaojie，好久不见，欢迎大家能够和Xiaojie一起学习毫米波雷达知识，Xiaojie准备连载一个系列的文章—DDMA信号处理以及数据处理的流程，本系列文章将从目标生成、信号仿真、测距、测速、cfar检测、测角、目标聚类、目标跟踪这几个模块逐步介绍，这个系列的文章大约是一个7-8篇左右。</p>
<p>最终效果如下：</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(3)/1.gif" class="" title="放置图片">
<p>整体文件的目录树如下：</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(3)/2.png" class="" title="放置图片">
<p>本篇文章主要讲的是原始数据生成的部分。</p>
<h1>基本理论</h1>
<h2 id="fmcw雷达基本结构">FMCW雷达基本结构</h2>
<p>下图为FMCW雷达基本结构，时序器和本地振荡器产生线性调频信号，调相器进行相位调制，功率放大器增强信号功率，最后由发射天线向外界传播。当信号在外界传输过程中遇到目标后会被反射，反射信号会被接收天线接收，通过低噪声放大器，与发射信号进行混频得到中频信号。中频信号包含目标的距离和速度信息。中频信号通过低通滤波器，经过模数转换后数据就可以用于提取目标信息</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(3)/3.png" class="" title="放置图片">
<h2 id="发射信号chirp序列">发射信号chirp序列</h2>
<p>下图为发射chirp发射信号和接收信号序列</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(3)/4.png" class="" title="放置图片">
<p>单个chirp发射信号表达式为：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mi>T</mi></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>A</mi><mi>T</mi></msub><msup><mi>e</mi><mrow><mi>j</mi><mo stretchy="false">[</mo><mn>2</mn><mi>π</mi><mo stretchy="false">(</mo><msub><mi>f</mi><mi>c</mi></msub><mi>t</mi><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>S</mi><msup><mi>t</mi><mn>2</mn></msup><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow></msup></mrow><annotation encoding="application/x-tex">S_T(t)=A_Te^{j[2\pi(f_ct+\frac{1}{2}St^2)]}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1869199999999998em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0369199999999998em;"><span style="top:-3.4130000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mopen mtight">[</span><span class="mord mtight">2</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">π</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:-0.10764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mord mathdefault mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443142857142858em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span><span class="mclose mtight">]</span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>当发射信号遇到目标后，会被反射，形成回波信号，回波信号的表达式为：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mi>R</mi></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>A</mi><mi>R</mi></msub><msup><mi>e</mi><mrow><mi>j</mi><mrow><mn>2</mn><mi>π</mi><mo stretchy="false">[</mo><mo stretchy="false">(</mo><msub><mi>f</mi><mi>c</mi></msub><mo>+</mo><msub><mi>f</mi><mi>d</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>t</mi><mo>−</mo><msub><mi>t</mi><mi>d</mi></msub><mo stretchy="false">)</mo><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>S</mi><mo stretchy="false">(</mo><mi>t</mi><mo>−</mo><msub><mi>t</mi><mi>d</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">]</mo></mrow></mrow></msup></mrow><annotation encoding="application/x-tex">S_R(t)=A_Re^{j{2\pi[(f_c+f_d)(t-t_d)+\frac{1}{2}S(t-t_d)^2]}}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1869199999999998em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0369199999999998em;"><span style="top:-3.4130000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">π</span><span class="mopen mtight">[</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:-0.10764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:-0.10764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span><span class="mclose mtight">)</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span><span class="mclose mtight">)</span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443142857142858em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span><span class="mclose mtight"><span class="mclose mtight">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose mtight">]</span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>接收到目标的回波信号与发射信号进行混频得到中频信号，其表达式为：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mrow><mi>I</mi><mi>F</mi></mrow></msub><mo>=</mo><msub><mi>A</mi><mrow><mi>I</mi><mi>F</mi></mrow></msub><msup><mi>e</mi><mrow><mi>j</mi><mrow><mn>2</mn><mi>π</mi><mo stretchy="false">[</mo><mo stretchy="false">(</mo><mi>S</mi><msub><mi>t</mi><mi>d</mi></msub><mo>−</mo><msub><mi>f</mi><mi>d</mi></msub><mo stretchy="false">)</mo><mi>t</mi><mo>+</mo><mo stretchy="false">(</mo><msub><mi>f</mi><mi>c</mi></msub><mo>+</mo><msub><mi>f</mi><mi>d</mi></msub><mo stretchy="false">)</mo><msub><mi>t</mi><mi>d</mi></msub><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>S</mi><msubsup><mi>t</mi><mi>d</mi><mn>2</mn></msubsup><mo stretchy="false">]</mo></mrow></mrow></msup></mrow><annotation encoding="application/x-tex">S_{IF}=A_{IF}e^{j{2\pi[(St_d-f_d)t+(f_c+f_d)t_d-\frac{1}{2}St_d^2]}}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07847em;">I</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1869199999999998em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07847em;">I</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0369199999999998em;"><span style="top:-3.4130000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">π</span><span class="mopen mtight">[</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:-0.10764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span><span class="mclose mtight">)</span><span class="mord mathdefault mtight">t</span><span class="mbin mtight">+</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:-0.10764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:-0.10764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span><span class="mclose mtight">)</span><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443142857142858em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.214em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">d</span></span></span><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286em;"><span></span></span></span></span></span></span><span class="mclose mtight">]</span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<h2 id="距离-速度-角度">距离、速度、角度</h2>
<p>距离公式：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>d</mi></msub><mo>=</mo><mfrac><mrow><mn>2</mn><mi>R</mi></mrow><mi>c</mi></mfrac></mrow><annotation encoding="application/x-tex">t_d = \frac{2R}{c}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.04633em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>速度公式：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>d</mi></msub><mo>=</mo><mfrac><mrow><mn>2</mn><mi>v</mi></mrow><mi>λ</mi></mfrac></mrow><annotation encoding="application/x-tex">f_d = \frac{2v}{\lambda}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">λ</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>角度公式：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Δ</mi><mi>ϕ</mi><mo>=</mo><mfrac><mrow><mn>2</mn><mi>π</mi></mrow><mi>λ</mi></mfrac><mi>d</mi><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Delta\phi= \frac{2\pi}{\lambda}dsin(\theta)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">Δ</span><span class="mord mathdefault">ϕ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">λ</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathdefault">d</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span></span></span></p>
<h1>仿真</h1>
<h2 id="雷达参数">雷达参数</h2>
<h3 id="基本参数">基本参数</h3>
<p>下表为仿真雷达的基本参数</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(3)/5.png" class="" title="放置图片">
<h3 id="阵列排布">阵列排布</h3>
<p>阵列排布采用均匀阵列，暂不考虑俯仰角测量</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(3)/6.png" class="" title="放置图片">
<h2 id="仿真代码">仿真代码</h2>
<h3 id="generateparameter-m文件">generateParameter.m文件</h3>
<p>generateParameter.m文件主要是一些雷达参数的宏定义，定义一些雷达的相关变量值；具体代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">% 参数设置</span><br><span class="line">function parameter = generateParameter()</span><br><span class="line"></span><br><span class="line">    parameter.frameNumLoops = 18; %初始化frame循环</span><br><span class="line">    parameter.frameCount = 0; %帧计数</span><br><span class="line">    parameter.targetNums = 1; %初始化真实目标</span><br><span class="line">    </span><br><span class="line">    parameter.c = 3e8; %光速</span><br><span class="line">    parameter.frameNums = 70; %帧数</span><br><span class="line">    parameter.frameTime = 60e-3; %帧周期</span><br><span class="line">    parameter.startFreq = 76.2e9;  %起始频率</span><br><span class="line">    parameter.Fs = 18.75e6; %采样率 实采样率37.5MHz的采样率  复采样率为18.75MHz的采样率</span><br><span class="line">    parameter.tr = 1 / parameter.Fs; %采样间隔</span><br><span class="line">    parameter.Slope = 20e12; %chirp斜率</span><br><span class="line">    parameter.Samples = 512;  %采样点</span><br><span class="line">    parameter.rangeBin = 512; %rangebin</span><br><span class="line">    parameter.Chirps = 384;  %chirp数</span><br><span class="line">    parameter.dopplerBin = 384; %dopplerbin</span><br><span class="line">    parameter.dopplerBinHalf = parameter.dopplerBin / 2; %多普勒bin的一半</span><br><span class="line">    parameter.TrValid = parameter.Samples / parameter.Fs; %采样有效时间</span><br><span class="line">    parameter.TrTotal = 38e-6;  %chirp周期</span><br><span class="line">    parameter.t = 0:parameter.tr:parameter.TrValid - parameter.tr; %chirp时间下标</span><br><span class="line">    parameter.validBandWidth = parameter.Slope * parameter.TrValid; %有效带宽</span><br><span class="line">    parameter.totalBandWidth = parameter.Slope * parameter.TrTotal; %总带宽</span><br><span class="line">    parameter.centerFreq = parameter.startFreq + parameter.validBandWidth / 2; %中心频率</span><br><span class="line">    parameter.lambda = parameter.c / parameter.centerFreq; %波长</span><br><span class="line"></span><br><span class="line">    parameter.txAntenna = [0 4 8 12]; %发射天线 暂不考俯仰 2944的方位发射天线</span><br><span class="line">    parameter.rxAntenna = [0 1 2 3]; %接收天线 2944的方位接收天线</span><br><span class="line">    parameter.txNum = length(parameter.txAntenna); %发射天线的数量</span><br><span class="line">    parameter.rxNum = length(parameter.rxAntenna); %接收天线的数量</span><br><span class="line">    parameter.dx = parameter.lambda / 2; %虚拟天线的方位最小间距</span><br><span class="line"></span><br><span class="line">    parameter.subBand = 6; %子带数</span><br><span class="line">    parameter.emptyBand = 2; %空子带数</span><br><span class="line">    parameter.validBand = parameter.txNum; %有效子带为发射天线数量</span><br><span class="line">    parameter.subDopplerBin = parameter.dopplerBin / parameter.subBand; %一个子带dopplerbin的数目</span><br><span class="line">    parameter.subBandRelation = [0, 1, 2, 3] * parameter.subDopplerBin; %子带间的关系</span><br><span class="line">    parameter.phaseShift = mod(2*pi .* (1:1:parameter.Chirps).&#x27; .* (0:1:parameter.txNum-1) ./ parameter.subBand, 2*pi); %chirp信号的相移值</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h3 id="generatesignal-m文件">generateSignal.m文件</h3>
<p>generateSignal.m文件主要目的是生成雷达的原始数据，生成一个维度为$rxNums<em>chirpNums</em>samples的矩阵；</p>
<p>具体代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">function rawData = generateSignal(Parameter,target)</span><br><span class="line"></span><br><span class="line">    c = Parameter.c; %光速</span><br><span class="line">    TrTotal = Parameter.TrTotal;  %脉冲重复周期</span><br><span class="line">    samples = Parameter.Samples; %采样点</span><br><span class="line">    chirps = Parameter.Chirps;  %chirp数</span><br><span class="line">    slope = Parameter.Slope; %chirp斜率</span><br><span class="line">    startFreq = Parameter.startFreq; %起始频率</span><br><span class="line">    deltaFreq = Parameter.deltaFreq; %步进频率</span><br><span class="line">    lambda = Parameter.lambda; %波长</span><br><span class="line">    txAntenna = Parameter.txAntenna; %发射天线的位置</span><br><span class="line">    rxAntenna = Parameter.rxAntenna; %接收天线的位置</span><br><span class="line">    txNum = Parameter.txNum; %发射天线数</span><br><span class="line">    rxNum = Parameter.rxNum; %接收天线数</span><br><span class="line">    dx = Parameter.dx; %水平间距</span><br><span class="line">    targetNum = size(target,1); %目标数</span><br><span class="line">    t = Parameter.t; %时间序列</span><br><span class="line">    phaseShift = Parameter.phaseShift; %移相值</span><br><span class="line">    rawData = zeros(rxNum,chirps,samples);</span><br><span class="line"></span><br><span class="line">    for rxId = 1:rxNum %接收天线循环</span><br><span class="line">       rxPos = rxAntenna(rxId); %每根接收天线的位置</span><br><span class="line">        for chirpId = 1:chirps %chirp数目循环</span><br><span class="line">            Sif = zeros(1,samples);</span><br><span class="line">            centerFreq = startFreq + (chirpId - 1) * deltaFreq;</span><br><span class="line">            for txId = 1:txNum %发射天线循环</span><br><span class="line">                txPos = txAntenna(txId); %每跟发射天线的位置</span><br><span class="line">                virtualAntennaPos = rxPos + txPos; %虚拟天线位置</span><br><span class="line">                phaseValue = phaseShift(chirpId,txId); %DDMA移相位值</span><br><span class="line">                St = exp((1i*2*pi) * (centerFreq * (t + chirpId * TrTotal) + slope / 2 * t.^2) + 1i * phaseValue); %发射信号</span><br><span class="line">                for targetId = 1:targetNum %目标数目循环</span><br><span class="line">                    targetRange = target(targetId,1); targetSpeed = target(targetId,2); targetAngle = target(targetId,3); %目标信息</span><br><span class="line">                    tau = 2 * targetRange / c; %距离信息</span><br><span class="line">                    fd = 2 * targetSpeed / lambda; %频移信息</span><br><span class="line">                    wx = 2 * pi * virtualAntennaPos / lambda * dx * sind(targetAngle); %天线相位信息</span><br><span class="line">                    Sr = exp((1i*2*pi) * ((centerFreq-fd) * (t - tau + chirpId * TrTotal) + slope / 2 * (t-tau).^2) - 1i * wx);  %回波信号</span><br><span class="line">%                     Sr = exp((1i*2*pi) * ((centerFreq-fd) * (t - tau + chirpId * TrTotal) + slope / 2 * (t-tau).^2));  %回波信号</span><br><span class="line">                    Sif = Sif + St .* conj(Sr);</span><br><span class="line">                end</span><br><span class="line">            end</span><br><span class="line">            rawData(rxId,chirpId,:) = Sif;</span><br><span class="line">        end</span><br><span class="line">        rawData(rxId,:,:) = awgn(rawData(rxId,:,:),0); %添加噪声</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="运行结果如下：">运行结果如下：</h3>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(3)/7.png" class="" title="放置图片">
<h1>参考文献</h1>
<ol>
<li><a target="_blank" rel="noopener" href="https://xxxxiaojie.blog.csdn.net/article/details/126538880">Xiaojie雷达之路—TDM-MIMO及雷达处理流程仿真</a></li>
</ol>
<p><strong>至此，本片文章就此结束了。</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xxiaojie.github.io/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(2)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xiaojie.png">
      <meta itemprop="name" content="xiaojie">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaojie雷达说">
      <meta itemprop="description" content="分享雷达知识">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | xiaojie雷达说">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(2)/" class="post-title-link" itemprop="url">DDMA signal&data Process(2)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-04-20 14:27:14 / 修改时间：14:27:53" itemprop="dateCreated datePublished" datetime="2025-04-20T14:27:14+08:00">2025-04-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/" itemprop="url" rel="index"><span itemprop="name">radar</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/DDMA-radar/" itemprop="url" rel="index"><span itemprop="name">DDMA radar</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.8k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Hello，大家好，我是Xiaojie，好久不见，欢迎大家能够和Xiaojie一起学习毫米波雷达知识，Xiaojie准备连载一个系列的文章—DDMA信号处理以及数据处理的流程，本系列文章将从目标生成、信号仿真、测距、测速、cfar检测、测角、目标聚类、目标跟踪这几个模块逐步介绍，这个系列的文章大约是一个7-8篇左右。</p>
<p>最终效果如下：</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(2)/1.gif" class="" title="放置图片">
<p>整体文件的目录树如下：</p>
<img src="/2025/04/20/radar/DDMA/DDMA%20signal&data%20Process(2)/2.png" class="" title="放置图片">
<p>本篇文章主要讲的是目标生成的部分。</p>
<p>目标生成部分主要是在targetGenerate目录下实现，按隔随机帧数来生成目标的随机距离、随机速度、随机角度以及随机横向距离。</p>
<h1>generateRandFrame.m介绍</h1>
<p>generateRandFrame.m文件主要目的是生成随机的帧数，目的是隔多少帧来生成一个新的目标。在下面代码中会在[18,23]中生成一个随机数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">%% 获取随机帧数，表征隔几帧生成一个新目标</span><br><span class="line">function frame = generateRandFrame()</span><br><span class="line">    frameMin = 18; %最小帧号</span><br><span class="line">    frameMax = 23; %最大帧号</span><br><span class="line">    %生成随机帧号，范围为[frameMin，frameMax]</span><br><span class="line">    frame = round(rand(1,1)*(frameMax-frameMin))+frameMin; </span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h1>generateNewTarget.m介绍</h1>
<p>generateNewTarget.m文件主要目的是生成一个新的目标，包括是在目标的径向距离、径向速度、角度、横向距离。目标的横向距离<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><mi>t</mi><mi>L</mi><mi>o</mi></mrow><annotation encoding="application/x-tex">targetLo</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">e</span><span class="mord mathdefault">t</span><span class="mord mathdefault">L</span><span class="mord mathdefault">o</span></span></span></span>范围在<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mo>−</mo><mn>10</mn><mo separator="true">,</mo><mn>10</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[-10,10]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord">1</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mclose">]</span></span></span></span>中，目标的径向速度<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>I</mi><mi>n</mi><mi>i</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">speedInit</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">p</span><span class="mord mathdefault">e</span><span class="mord mathdefault">e</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault">n</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span></span></span></span>范围在<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mo>−</mo><mn>25</mn><mo separator="true">,</mo><mn>25</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[-25,25]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord">2</span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mclose">]</span></span></span></span>中，目标的径向距离是和径向速度是相关的，当径向速度小于0时，目标径向距离为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>125</mn></mrow><annotation encoding="application/x-tex">125</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mord">5</span></span></span></span>，当径向速度大于0时，目标径向距离为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>+</mo><mi>a</mi><mi>b</mi><mi>s</mi><mo stretchy="false">(</mo><mi>t</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><mi>t</mi><mi>L</mi><mi>o</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">2+abs(targetLo)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">e</span><span class="mord mathdefault">t</span><span class="mord mathdefault">L</span><span class="mord mathdefault">o</span><span class="mclose">)</span></span></span></span>，目标角度计算为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>n</mi><mi>g</mi><mi>l</mi><mi>e</mi><mi>I</mi><mi>n</mi><mi>i</mi><mi>t</mi><mo>=</mo><mi>a</mi><mi>s</mi><mi>i</mi><mi>n</mi><mi>d</mi><mo stretchy="false">(</mo><mi>t</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><mi>t</mi><mi>L</mi><mi>o</mi><mi mathvariant="normal">/</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>g</mi><mi>e</mi><mi>I</mi><mi>n</mi><mi>i</mi><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">angleInit = asind(targetLo/rangeInit)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault">n</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault">d</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">e</span><span class="mord mathdefault">t</span><span class="mord mathdefault">L</span><span class="mord mathdefault">o</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault">n</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mclose">)</span></span></span></span>，最终一个新的目标为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><mi>t</mi><mo>=</mo><mo stretchy="false">[</mo><mi>r</mi><mi>a</mi><mi>n</mi><mi>g</mi><mi>e</mi><mi>I</mi><mi>n</mi><mi>i</mi><mi>t</mi><mo separator="true">,</mo><mi>s</mi><mi>p</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>I</mi><mi>n</mi><mi>i</mi><mi>t</mi><mo separator="true">,</mo><mi>a</mi><mi>n</mi><mi>g</mi><mi>l</mi><mi>e</mi><mi>I</mi><mi>n</mi><mi>i</mi><mi>t</mi><mo separator="true">,</mo><mi>t</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><mi>t</mi><mi>L</mi><mi>o</mi><mo stretchy="false">]</mo><mo separator="true">;</mo></mrow><annotation encoding="application/x-tex">target = [rangeInit, speedInit, angleInit, targetLo];</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">e</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault">n</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">p</span><span class="mord mathdefault">e</span><span class="mord mathdefault">e</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault">n</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault">n</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">e</span><span class="mord mathdefault">t</span><span class="mord mathdefault">L</span><span class="mord mathdefault">o</span><span class="mclose">]</span><span class="mpunct">;</span></span></span></span></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">%% 产生一个新的目标</span><br><span class="line">function target = generateNewTarget()</span><br><span class="line"></span><br><span class="line">    loMin = -10; %横距的最小值</span><br><span class="line">    loMax = 10; %横距的最大值</span><br><span class="line">    %随机生成目标的横距，范围为[loMin,loMax]</span><br><span class="line">    targetLo = round(rand(1,1)*(loMax-loMin))-loMax; </span><br><span class="line">    speedInit = 0; % 目标速度初始化为0</span><br><span class="line">    speedMax = 25; % 目标速度的最大值</span><br><span class="line">    speedMin = -25; % 目标速度的最小值</span><br><span class="line">    % 随机生成目标的速度，范围为[speedMin,speedMax]</span><br><span class="line">    while (speedInit == 0)</span><br><span class="line">        speedInit = round(rand(1,1)*(speedMax-speedMin))-speedMax;</span><br><span class="line">    end</span><br><span class="line">    if speedInit &lt; 0 %目标速度的小于0，目标从远靠近</span><br><span class="line">        rangeInit = 125;</span><br><span class="line">    else</span><br><span class="line">        rangeInit = 2 + abs(targetLo); %目标从近到远</span><br><span class="line">    end</span><br><span class="line">    angleInit = asind(targetLo/rangeInit); %目标角度初始化</span><br><span class="line">    target = [rangeInit, speedInit, angleInit, targetLo]; %目标信息生成</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h1>targetUpdate.m介绍</h1>
<p>随着帧数的变化，目标的径向速度以及角度会发生变化(假设目标的径向速度不变)，targetUpdate.m文件主要目的是对生成目标的径向距离以及角度进行更新。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">%% 目标信息更新</span><br><span class="line">function target = targetUpdate(parameter,target)</span><br><span class="line"></span><br><span class="line">    for targetIdx = 1:1:parameter.targetNums</span><br><span class="line">        </span><br><span class="line">        targetRange = target(targetIdx,1); %目标的距离</span><br><span class="line">        targetSpeed = target(targetIdx,2); %目标的速度</span><br><span class="line">        targetLo = target(targetIdx,4); %目标的横距</span><br><span class="line">        targetRange = targetRange + targetSpeed * parameter.frameTime; %目标距离计算</span><br><span class="line">        targetAngle = asind(targetLo/targetRange); %目标角度计算</span><br><span class="line">        target(targetIdx,1) = targetRange; %距离更新</span><br><span class="line">        target(targetIdx,2) = targetSpeed; %速度更新</span><br><span class="line">        target(targetIdx,3) = targetAngle; %角度更新</span><br><span class="line">    end</span><br><span class="line">    </span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h1>generateMovingTarget.m介绍</h1>
<p>generateMovingTarget.m是生成移动的目标，当frameNumLoops为0时，会生成新的目标且目标列表更新并生成下次目标生成的随机帧号；且每帧都会进行目标信息更新</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">%% 生成动态目标</span><br><span class="line">function [parameter,target] = generateMovingTarget(parameter,target)</span><br><span class="line">    </span><br><span class="line">    parameter.frameNumLoops = parameter.frameNumLoops - 1; %frameNumLoops</span><br><span class="line">    % 如果frameNumLoops为0，则生成新的目标</span><br><span class="line">    if parameter.frameNumLoops == 0</span><br><span class="line">        newTarget = generateNewTarget(); % 生成新目标</span><br><span class="line">        parameter.targetNums = parameter.targetNums + 1; %目标数增加</span><br><span class="line">        target = [target ; newTarget]; %target更新</span><br><span class="line">        parameter.frameNumLoops = generateRandFrame(); %生成随机帧号</span><br><span class="line">    end</span><br><span class="line">    target = targetUpdate(parameter,target); %目标信息更新</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p><strong>至此，本片文章就此结束了。</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://xxiaojie.github.io/2025/04/17/radar/DDMA/DDMA%20signal&data%20Process(1)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xiaojie.png">
      <meta itemprop="name" content="xiaojie">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaojie雷达说">
      <meta itemprop="description" content="分享雷达知识">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | xiaojie雷达说">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/04/17/radar/DDMA/DDMA%20signal&data%20Process(1)/" class="post-title-link" itemprop="url">DDMA signal&data Process(1)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-04-17 23:19:14" itemprop="dateCreated datePublished" datetime="2025-04-17T23:19:14+08:00">2025-04-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-04-19 21:52:33" itemprop="dateModified" datetime="2025-04-19T21:52:33+08:00">2025-04-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/" itemprop="url" rel="index"><span itemprop="name">radar</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/radar/DDMA-radar/" itemprop="url" rel="index"><span itemprop="name">DDMA radar</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Hello，大家好，我是Xiaojie，好久不见，欢迎大家能够和Xiaojie一起学习毫米波雷达知识，Xiaojie准备连载一个系列的文章—DDMA信号处理以及数据处理的流程，本系列文章将从目标生成、信号仿真、测距、测速、cfar检测、测角、目标聚类、目标跟踪这几个模块逐步介绍，这个系列的文章大约是一个7-8篇左右。</p>
<p>最终效果如下：</p>
<img src="/2025/04/17/radar/DDMA/DDMA%20signal&data%20Process(1)/1.gif" class="" title="放置图片">
<p>本篇文章主要讲的是DDMA原理性的部分。</p>
<h2 id="ddma波形">DDMA波形</h2>
<p>DDMA波形下所有发射天线同时发射，但是每个发射天线的信号都偏移一个特定的频率，通过这个外部偏移的频率使不同发射天线的信号在doppler域上能分离开来。</p>
<p>不同发射天线上的频率偏移是通过在chirp之间上施加不同的相位旋转来实现的，但是在chirp内信号的相位是不变的。</p>
<p>假如发射天线总共有<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>N</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">N_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>根发射天线，对于发射天线k，在相邻chirp上施加的相移<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ω</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">\omega _k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>由下式决定：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ω</mi><mi>k</mi></msub><mo>=</mo><mfrac><mrow><mn>2</mn><mi>π</mi><mo stretchy="false">(</mo><mi>k</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><msub><mi>N</mi><mi>t</mi></msub></mfrac><mtext>，</mtext><mi>k</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mo>…</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>N</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\omega_k=\frac{2\pi (k-1)}{N_t}，k=1,……,N_t
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.263em;vertical-align:-0.8360000000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord cjk_fallback">，</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<p>发射天线数量为3根时，具体表现如下图所示(图片来源于TI文档)：</p>
<img src="/2025/04/17/radar/DDMA/DDMA%20signal&data%20Process(1)/2.png" class="" title="放置图片">
<p>当目标的速度超过一定的范围时，就无法根据子带的位置去分离不同的发射天线数据，就会产生DDMA的速度模糊问题。</p>
<h2 id="ddma速度解模糊">DDMA速度解模糊</h2>
<p>为解决DDMA速度模糊的问题，TI采用的是一种基于空子带的解速度模糊的方法。</p>
<p>在相邻chirp上施加的相移<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ω</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">\omega _k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>修改为：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ω</mi><mi>k</mi></msub><mo>=</mo><mfrac><mrow><mn>2</mn><mi>π</mi><mo stretchy="false">(</mo><mi>k</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mrow><msub><mi>N</mi><mi>t</mi></msub><mo>+</mo><msub><mi>N</mi><mrow><mi>e</mi><mi>m</mi><mi>p</mi><mi>t</mi><mi>y</mi></mrow></msub></mrow></mfrac><mtext>，</mtext><mi>k</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mo>…</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>N</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\omega_k=\frac{2\pi (k-1)}{N_t+N_{empty}}，k=1,……,N_t
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.399108em;vertical-align:-0.972108em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.28055599999999997em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">p</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.972108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord cjk_fallback">，</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>N</mi><mrow><mi>e</mi><mi>m</mi><mi>p</mi><mi>t</mi><mi>y</mi></mrow></msub></mrow><annotation encoding="application/x-tex">N_{empty}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.28055599999999997em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">p</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>为空子带的数量</p>
<p>发射天线数量为4根，空子带数量为2时，具体表现如下图所示(图片来源于TI文档)：</p>
<img src="/2025/04/17/radar/DDMA/DDMA%20signal&data%20Process(1)/3.png" class="" title="放置图片">
<h2 id="ddma信号仿真">DDMA信号仿真</h2>
<p>对DDMA信号进行仿真，参数如下：</p>
<pre><code>发射天线数量：4，
空子带数量：2，
chirp数量：384，
</code></pre>
<p>结果如下：</p>
<img src="/2025/04/17/radar/DDMA/DDMA%20signal&data%20Process(1)/4.png" class="" title="放置图片">
<p>代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">clc;close all;clear;</span><br><span class="line">chirpNums = 384;</span><br><span class="line">txAntennas = 4;</span><br><span class="line">emptySuband = 2;</span><br><span class="line">i = 1:1:chirpNums;</span><br><span class="line">j = 1:1:txAntennas;</span><br><span class="line">phi = zeros(chirpNums,txAntennas);</span><br><span class="line">S = zeros(chirpNums, 1);</span><br><span class="line"></span><br><span class="line">for i_index= 1:1:chirpNums</span><br><span class="line">    for j_index = 1:1:txAntennas</span><br><span class="line">        phi (i_index,j_index)= mod(360*(i_index-1)*(j_index-1)/(txAntennas+emptySuband),360);</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line">s1(:,1)= cosd(phi(:, 1));</span><br><span class="line">s2(:,1)= cosd(phi(:, 2));</span><br><span class="line">s3(:,1)= cosd(phi(:, 3));</span><br><span class="line">s4(:,1)= cosd(phi(:, 4));</span><br><span class="line">figure;</span><br><span class="line">subplot(4,2,1);plot(((s1)));xlabel(&#x27;chirp数&#x27;);ylabel(&#x27;幅值&#x27;);title(&#x27;tx0天线时域信号&#x27;)</span><br><span class="line">subplot(4,2,3);plot(((s2)));xlabel(&#x27;chirp数&#x27;);ylabel(&#x27;幅值&#x27;);title(&#x27;tx1天线时域信号&#x27;)</span><br><span class="line">subplot(4,2,5);plot(((s3)));xlabel(&#x27;chirp数&#x27;);ylabel(&#x27;幅值&#x27;);title(&#x27;tx2天线时域信号&#x27;)</span><br><span class="line">subplot(4,2,7);plot(((s4)));xlabel(&#x27;chirp数&#x27;);ylabel(&#x27;幅值&#x27;);title(&#x27;tx3天线时域信号&#x27;)</span><br><span class="line">subplot(4,2,2);plot(abs(fft(s1)));xlabel(&#x27;chirp数&#x27;);ylabel(&#x27;幅值&#x27;);title(&#x27;tx0天线频域信号&#x27;);</span><br><span class="line">subplot(4,2,4);plot(abs(fft(s2)));xlabel(&#x27;chirp数&#x27;);ylabel(&#x27;幅值&#x27;);title(&#x27;tx1天线频域信号&#x27;);</span><br><span class="line">subplot(4,2,6);plot(abs(fft(s3)));xlabel(&#x27;chirp数&#x27;);ylabel(&#x27;幅值&#x27;);title(&#x27;tx2天线频域信号&#x27;);</span><br><span class="line">subplot(4,2,8);plot(abs(fft(s4)));xlabel(&#x27;chirp数&#x27;);ylabel(&#x27;幅值&#x27;);title(&#x27;tx3天线频域信号&#x27;);</span><br></pre></td></tr></table></figure>
<h2 id="参考文献">参考文献</h2>
<ol>
<li>《基于 AWR2944 的汽车雷达 DDMA 波形的原理和实现》</li>
</ol>
<p><strong>至此，本片文章就此结束了。</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>





</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">xiaojie</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">55k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">50 分钟</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
